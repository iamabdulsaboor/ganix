!function(){"use strict";(a=c||(c={})).Percentage="percentage",a.FixedAmount="fixed_amount",a.NoDiscount="no_discount";let t=t=>{var e;if(!t)return null;let i=t.closest(".product-bundle-item");return{quantity:Number(null==i?void 0:i.getAttribute("quantity")),discountValue:Number(null==i?void 0:i.getAttribute("discountValue")),discountType:null!==(e=null==i?void 0:i.getAttribute("discountType"))&&void 0!==e?e:c.NoDiscount}},e=t=>({discountPercentAmount:0,discountAmount:window.Shopify.formatMoney(0,t)}),i=t=>{var i,n,s,d;let{currentVariant:a,bundleItem:h,options:v}=t;if(!(null==v?void 0:v.useProductCompareAtPrice)&&(null==h?void 0:h.discountType)===c.NoDiscount)return e(null!==(i=null==v?void 0:v.moneyFormat)&&void 0!==i?i:"${{amount}}");if(!h||!(null==a?void 0:a.price))return e(null!==(n=null==v?void 0:v.moneyFormat)&&void 0!==n?n:"${{amount}}");let m=Number(null==a?void 0:a.price),p=Number(null==a?void 0:a.compare_at_price)||m,f=Number((null==h?void 0:h.quantity)||1),g=u(m,h),y=l(g,f*m),P=m*f-g,S=p*f;return p<=m&&g<=0?e(null!==(s=null==v?void 0:v.moneyFormat)&&void 0!==s?s:"${{amount}}"):{discountPercentAmount:(null==v?void 0:v.useProductCompareAtPrice)?o(P,S):y,discountAmount:(null==v?void 0:v.useProductCompareAtPrice)?r(P,S,null==v?void 0:v.moneyFormat):window.Shopify.formatMoney(g,null!==(d=null==v?void 0:v.moneyFormat)&&void 0!==d?d:"${{amount}}")}},n=t=>100*t,o=(t,e)=>Math.round((e-t)/e*100),r=(t,e,i)=>window.Shopify.formatMoney(e-t,null!=i?i:"${{amount}}"),u=(t,e)=>{let i=Number(null==e?void 0:e.discountValue);return(null==e?void 0:e.discountType)===c.Percentage?t*e.quantity*i/100:(null==e?void 0:e.discountType)===c.FixedAmount?n(i):0},l=(t,e)=>Math.round(t/e*100);function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d,a,c,h,v=()=>class extends GP.Component{connectedCallback(){let t=this.closest("gp-product");if((null==t?void 0:t.getState)&&t.getState("isReady")){this.rootInit();return}null==t||t.addEventListener("gp:product-init",()=>{requestAnimationFrame(()=>{this.context=null==t?void 0:t.context,this.rootInit()})})}constructor(t){super(),s(this,"initFunc",void 0),s(this,"rootInit",()=>{let t=this.closest(".gps > section");if(null==t?void 0:t.classList.contains("gps-lazy")){null==t||t.addEventListener("GpLazyLoaded",this.rootInit);return}null==t||t.removeEventListener("GpLazyLoaded",this.rootInit),this.initFunc&&this.initFunc()}),this.initFunc=t}};let m=t=>{var e,i,n;return(null===(i=null===(n=t.closest("gp-product"))||void 0===n?void 0:n.querySelector("gp-product-variants"))||void 0===i?void 0:null===(e=i.getState)||void 0===e?void 0:e.call(i))||""};function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}(d=h||(h={})).Percentage="percentage",d.Price="price";var f=()=>class extends v(){constructor(){var e,n;super(()=>{this.init()}),p(this,"moneyFormat",void 0),p(this,"bundleItem",void 0),p(this,"customContentPrefix",void 0),p(this,"customContentSuffix",void 0),p(this,"productBundleWrapper",void 0),p(this,"productEl",this.closest("gp-product")),p(this,"hasUpdatePrice",(null===(e=null===(n=this.productEl)||void 0===n?void 0:n.querySelector(".quantityClass"))||void 0===e?void 0:e.getAttribute("data-price"))==="true"),p(this,"init",()=>{var e,i,n,o,r;this.productBundleWrapper=this.closest("gp-product-bundle-discount"),this.moneyFormat=this.getState("moneyFormat");let u=this.closest(".product-bundle-item");this.bundleItem=t(u);let{customContent:l}=null!==(e=this.getSetting())&&void 0!==e?e:{};this.customContentPrefix=null!==(n=null!==(i=this.dataset.prefix)&&void 0!==i?i:null==l?void 0:l.prefix)&&void 0!==n?n:"",this.customContentSuffix=null!==(r=null!==(o=this.dataset.suffix)&&void 0!==o?o:null==l?void 0:l.suffix)&&void 0!==r?r:"",u&&this.setAttribute("data-disabled",this.getContext("variantSelected")?"false":"true"),this.subscribeContext(t=>{var e;if(u){this.showDiscountedPrice(t,this.bundleItem);return}if(null==t?void 0:t.hasBundleDiscountActive){this.showDiscountedPrice(t,null===(e=t.productCustomPrice)||void 0===e?void 0:e.bundleItem);return}this.showRegularPrice(t)})}),p(this,"showDiscountedPrice",(t,e)=>{var n,o;let{customContent:r}=null!==(n=this.getSetting())&&void 0!==n?n:{},u="";if(this.setAttribute("data-disabled",t.variantSelected?"false":"true"),!t.variantSelected)return;let{discountPercentAmount:l,discountAmount:s}=i({currentVariant:t.variantSelected,bundleItem:e,options:{moneyFormat:this.moneyFormat,useProductCompareAtPrice:t.useProductCompareAtPrice}});this.setAttribute("data-disabled",l<=0||s<=0?"true":"false");let d=null!==(o=null==r?void 0:r.unit)&&void 0!==o?o:"percentage";this.isNoDiscount()&&(u=this.makePrefix("percentage"===d?"0%":this.formatPrice(0))),"percentage"===d&&(u=this.makePrefix(`${l}%`)),"price"===d&&(u=this.makePrefix(s));let a=this.querySelector(this.textSelector());a&&(a.innerHTML=u)}),p(this,"textSelector",()=>{let t=this.getState("id");return`#p-tag-${t} [data-gp-text]`}),p(this,"showRegularPrice",t=>{let e=this.getAttribute("price-save")||"0",i=m(this);if(!t.variantSelected&&i.currentSelected){this.setAttribute("data-disabled","true");return}if(!t.variantSelected&&0>=parseInt(e)){this.dataset.disabled="true";let t=this.getPriceText(null),e=this.querySelector(this.textSelector());e&&(e.innerHTML=t)}if(t.variantSelected){this.checkConditionWithComparePrice(t.variantSelected);let e=this.getPriceText(t),i=this.querySelector(this.textSelector());i&&(i.innerHTML=e)}}),p(this,"checkConditionWithComparePrice",t=>{var e,i;let n=null!==(e=null==t?void 0:t.price)&&void 0!==e?e:0,o=null!==(i=null==t?void 0:t.compare_at_price)&&void 0!==i?i:0;this.dataset.disabled=(o<=0||0>=Math.round((o-n)/(o/100))).toString()}),p(this,"getPriceText",t=>{var e,i,n;let{variantSelected:o,quantity:r}=null!=t?t:{},{customContent:u}=null!==(e=this.getSetting())&&void 0!==e?e:{},l=null!==(i=null==o?void 0:o.price)&&void 0!==i?i:0,s=null!==(n=null==o?void 0:o.compare_at_price)&&void 0!==n?n:0,d=this.hasUpdatePrice&&(null==u?void 0:u.unit)!=="percentage"&&r||1,a=(s-l)*d,c=window.Shopify.formatMoney(`${a<0?0:a}`,this.moneyFormat);if(!s&&0!==s||!l&&0!==l)return`${this.customContentPrefix} ${(null==u?void 0:u.unit)===h.Percentage?"0%":c} ${this.customContentSuffix}`;if((null==u?void 0:u.unit)===h.Percentage){let t=Math.round(a/(s/100));return`${this.customContentPrefix} ${t<0?0:t}% ${this.customContentSuffix}`}return`${this.customContentPrefix} ${c} ${this.customContentSuffix}`}),p(this,"isNoDiscount",()=>{var t;return(null===(t=this.bundleItem)||void 0===t?void 0:t.discountType)===c.NoDiscount}),p(this,"makePrefix",t=>`${this.customContentPrefix} ${t} ${this.customContentSuffix}`),p(this,"formatPrice",t=>window.Shopify.formatMoney(`${t}`,this.moneyFormat)),p(this,"getSetting",()=>this.getState("setting")),p(this,"getShopLocale",()=>this.getState("locale")),p(this,"getShopCurrency",()=>this.getState("currency"))}};let g=()=>{window.removeEventListener("gp-global-loaded",g),customElements.get("gp-product-tag")||customElements.define("gp-product-tag",f())};"completed"===window.gpReadyState?g():window.addEventListener("gp-global-loaded",g)}();
