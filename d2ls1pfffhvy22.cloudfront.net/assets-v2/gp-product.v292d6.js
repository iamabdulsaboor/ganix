!function(){"use strict";let t=t=>{let e;return e=t?"string"==typeof t?new URL(t):t:new URL(window.location.href),RegExp("/collections/","i").test(e.pathname)};(n=d||(d={})).EXACT="exact",n.ABOVE="above",n.BELOW="below",n.EXACT_OR_ABOVE="exact_or_above",n.EXACT_OR_BELOW="exact_or_below",n.BETWEEN="between",(r=u||(u={})).INVENTORY_STATUS="inventory_status",r.DISCOUNT_PRICE="discount_price",r.PRICE_RANGE="price_range",r.PRODUCT_TAGS="product_tags",r.CREATION_DATE="creation_date",(o=s||(s={})).IN_STOCK="in_stock",o.OUT_OF_STOCK="out_of_stock",(a=c||(c={})).DURATION="duration",a.EXACT_DATE="exact_date",a.BETWEEN_DATES="between_dates",(l=h||(h={})).PERCENT="percent",l.FIXED="fixed";let e="variant";function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n,r,o,a,l,d,u,s,c,h,v=()=>class extends GP.Component{connectedCallback(){this.initQuantity(),this.initInventoryQuantity(),this.addSubscribeContext(),this.onEventChangeVariant(),this.onEventChangeQuantity(),this.onEventProductBundleChange(),this.dispatchEvent(new CustomEvent("gp:product-init")),this.setState("isReady",!0)}handleSetProductTitleLink(){this.setProductTitleSelectors(),this.handleProductTitleLinkWrapper(),this.subscribeToVariantChanges()}initQuantity(){this.quantity&&!this.quantity.value&&(this.quantity.value="1")}initInventoryQuantity(){let t=this.getContext("variantSelected"),e=this.getContext("inventoryQuantity");t&&!(null==t?void 0:t.inventoryQuantity)&&e&&(t.inventoryQuantity=e,this.setContext("variantSelected",t))}addSubscribeContext(){this.subscribeContext((t,e)=>{var i,n,r,o,a,l,d;(null===(i=t.variantSelected)||void 0===i?void 0:i.id)!==(null===(n=e.variantSelected)||void 0===n?void 0:n.id)&&(this.variantSelectedID&&(null===(r=t.variantSelected)||void 0===r?void 0:r.id)&&(this.variantSelectedID.value=t.variantSelected.id.toString()),this.quantity&&(this.quantity.value=null!==(a=null===(o=t.quantity)||void 0===o?void 0:o.toString())&&void 0!==a?a:"1")),t.quantity!=e.quantity&&this.quantity&&(this.quantity.value=null!==(d=null===(l=t.quantity)||void 0===l?void 0:l.toString())&&void 0!==d?d:"1")})}onEventChangeVariant(){window.addEventListener("gp:product-change-variant",t=>{if(t.detail){let i=t.detail.productId,n=t.detail.variantSelected,r=t.detail.productElementUid,o=t.detail.fromIsSyncProduct,a=this.getContext(),l=a.productId,d=a.isSyncProduct,u=this.dataset.uid;if(i==l&&(u&&u===r||"true"==o&&"true"==d)){var e;this.setContext("variantSelected",n);let t=null==n?void 0:n.options,i={};for(let e of t){let t=this.querySelectorAll(`select[name="${e.name.replace(/['"\\]/g,"\\$&")}"]`);for(let i of Array.from(t))i.value=e.value;i[`${e.name}`]=e.value}let r=this.querySelectorAll("gp-product-variants");for(let t of Array.from(r))"setState"in t&&(null==t||t.setState("currentSelected",i),null==t||t.setStyleOptionValue(i,{shopifyProductOptionValues:null==n?void 0:n.shopifyProductOptionValues}));let o=this.querySelectorAll("#p-variant-group-dropdown");for(let t of Array.from(o))t.value=null==n?void 0:null===(e=n.id)||void 0===e?void 0:e.toString()}}})}onEventChangeQuantity(){window.addEventListener("gp:product-change-quantity",t=>{if(t.detail){let e=t.detail.productId,i=t.detail.quantity,n=this.getContext(),r=n.productId,o=n.isSyncProduct,a=n.quantity;e==r&&a!=i&&"true"==o&&(this.setContext("isQuantityChange",!0),this.setContext("quantity",i))}})}onEventProductBundleChange(){window.addEventListener("gp:product-bundle-change",t=>{let{detail:e}=t;if(!e)return;let{productId:i,productCustomPrice:n,useProductCompareAtPrice:r,hasBundleDiscountActive:o,quantity:a}=e,{productId:l,productCustomPrice:d,isSyncProduct:u}=this.getContext();i===l&&"true"===u&&this.notBundleEqual(n,d)&&(this.setContext("quantity",a),this.setContext("productCustomPrice",n),this.setContext("useProductCompareAtPrice",r),this.setContext("hasBundleDiscountActive",o))})}notBundleEqual(t,e){return JSON.stringify(t)!==JSON.stringify(e)}constructor(){super(),i(this,"quantity",null),i(this,"variantSelectedID",null),i(this,"productTitleLinkWrapper",void 0),i(this,"setProductTitleSelectors",()=>{var t;this.productTitleLinkWrapper=null===(t=this.getElementsByClassName("gp-product-title-link-wrapper"))||void 0===t?void 0:t[0]}),i(this,"subscribeToVariantChanges",()=>{this.subscribeContext((t,i)=>{var n,r,o;if((null===(n=t.variantSelected)||void 0===n?void 0:n.id)===(null===(r=i.variantSelected)||void 0===r?void 0:r.id)||!this.productTitleLinkWrapper)return;let a=new URL(this.productTitleLinkWrapper.href,window.location.origin);(null===(o=t.variantSelected)||void 0===o?void 0:o.id)?a.searchParams.set(e,t.variantSelected.id.toString()):a.searchParams.delete(e),this.productTitleLinkWrapper.href=a.toString()})}),i(this,"setProductInCollectionLink",()=>{var t;if(!this.productTitleLinkWrapper)return;let{productHandle:e,collectionHandle:i,collectionUrl:n,pageContext:r}=this.getState();if(!i||!n||!e)return;let o=e?`/products/${e}`:"",a=null!=n?n:`/collections/${i}`,l=null===(t=null==r?void 0:r.hasCollectionHandle)||void 0===t||t;this.productTitleLinkWrapper.href=`${l?a:""}${o}`}),i(this,"setProductLink",()=>{if(!this.productTitleLinkWrapper)return;let{productUrl:t,productHandle:e}=this.getState();if(!t||!e)return;let i=e?`/products/${e}`:"#";this.productTitleLinkWrapper.href=null!=t?t:i}),i(this,"handleProductTitleLinkWrapper",()=>{t()?this.setProductInCollectionLink():this.setProductLink()}),this.quantity=this.querySelector('input[name="quantity"]'),this.variantSelectedID=this.querySelector('input[name="id"]'),this.handleSetProductTitleLink()}};let p=()=>{window.removeEventListener("gp-global-loaded",p),customElements.get("gp-product")||customElements.define("gp-product",v())};"completed"===window.gpReadyState?p():window.addEventListener("gp-global-loaded",p)}();
