!function(t){"use strict";let e=t=>Object.entries(t).reduce((t,[e,i])=>null==i?t:{...t,[e]:i},{}),i=({query:t,container:e})=>{let i=null;try{i=(e||document).querySelector(t||"")}catch(t){console.info("querySelector error",t)}return i};function n(t,e){let i=t.getBoundingClientRect().top+window.pageYOffset,n=window.pageYOffset,l=i-n,o=null;requestAnimationFrame(function t(i){var r;null===o&&(o=i);let a=i-o,s=(r=a/(e/2))<1?l/2*r*r+n:-l/2*(--r*(r-2)-1)+n;window.scrollTo(0,s),a<e&&requestAnimationFrame(t)})}let l=["Shrine PRO","Haze PRO"],o=()=>{let t=r();if(!a(t))return;let e=s();if(0===e.length)return;let i=Array.from(document.querySelectorAll(".cart-items .cart-item")),n=u(i),l=e.filter(t=>d(t,n,i.length));if(0!==l.length)return l},r=()=>{var t,e,i;return(null===(i=window)||void 0===i?void 0:null===(e=i.Shopify)||void 0===e?void 0:null===(t=e.theme)||void 0===t?void 0:t.schema_name)||""},a=t=>l.includes(t),s=()=>{let t=document.querySelectorAll("cart-drawer-upsell");return Array.from(t).map(t=>({id:t.getAttribute("data-id"),isSelected:"true"===t.getAttribute("data-selected"),quantity:1})).filter(t=>null!==t.id)},u=t=>t.map(t=>{var e;return null===(e=t.querySelector(".quantity__input"))||void 0===e?void 0:e.getAttribute("data-quantity-variant-id")}).filter(t=>null!==t),d=(t,e,i)=>{let n=e.includes(t.id),l=e.some(e=>e!==t.id),o=[i>0&&!n,0===i&&!t.isSelected,n&&l&&t.isSelected,i>0&&n&&!t.isSelected];return!o.some(t=>t)},c=t=>{let e=Object.keys(t),i="";return e.forEach(e=>{t[e]&&(i+=`${e}: ${t[e]};`)}),i},h=t=>`gp-g-${t}`,v=t=>{let{fontFamily:e,isCustom:i,fallbackFontFamily:n,type:l}=t||{};return e?"string"==typeof e?p({fontFamily:e,fallbackFontFamily:(null==t?void 0:t.fallbackFontFamily)||g(null!=l?l:"heading")}):"object"==typeof e&&"string"==typeof(null==e?void 0:e.value)?"theme"===e.type?`var(${null==e?void 0:e.value}), var(--g-font-body)`:p({fontFamily:e.value,fallbackFontFamily:(null==t?void 0:t.fallbackFontFamily)||g(null!=l?l:"heading")}):void 0:i?n:void 0},p=({fontFamily:t,fallbackFontFamily:e})=>{if(t)return`var(--g-font-${null==t?void 0:t.replace(/ /g,"-")}, '${t}'), ${e}`},f=(t,e)=>t?(null==t?void 0:t.type)&&!b(t.custom)?h(t.type):"":(null==e?void 0:e.type)&&h(null==e?void 0:e.type),g=t=>t.toLocaleLowerCase().includes("heading")?"var(--g-font-heading, heading)":"var(--g-font-body, body)",b=t=>t&&Object.keys(t).length>1||t&&1===Object.keys(t).length&&!t.fontSize;function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class y{createNotify(){let t=f(this.typo),e=this.composeStyle();this.addWrapper(),this.addElement(t,e),this.addCloseBtn(),setTimeout(()=>{this.$element&&(this.$element.remove(),this.$element=null)},this.duration)}addWrapper(){let t=document.getElementById("notification-wrapper");if(t)this.$wrapper=t;else{let t=document.createElement("div");t.id="notification-wrapper",t.className="gps",t.style.cssText=`position: fixed;
        left: 50%;
        top: 16px;
        z-index: 100000;
        display: flex;
        flex-direction: column;
        gap: 8px;
        transform: translateX(-50%);
      `,this.$wrapper=t,document.body.appendChild(t),this.addFontSizeReponsive()}}addFontSizeReponsive(){var t,e,i,n,l;let o=document.createElement("style"),r=null===(t=this.typo)||void 0===t?void 0:t.custom;o.textContent=`
      @media only screen and (max-width: 1024px) and (min-width: 768px) {
        .message-type-${this.type} {
          font-size: ${(null==r?void 0:null===(e=r.fontSize)||void 0===e?void 0:e.tablet)?null==r?void 0:null===(i=r.fontSize)||void 0===i?void 0:i.tablet:void 0} !important;
        }
      }
      @media only screen and (max-width: 767px) {
        .message-type-${this.type} {
          font-size: ${(null==r?void 0:null===(n=r.fontSize)||void 0===n?void 0:n.mobile)?null==r?void 0:null===(l=r.fontSize)||void 0===l?void 0:l.mobile:void 0} !important;
        }
      }
    `,this.$wrapper&&this.$wrapper.appendChild(o)}addElement(t,e){var i,n;let l=`<div class="message-container ${t} message-type-${this.type}"
        style="color: ${this.getColor()}; ${e?c(e):""}";
      >`+((null===(n=this.typo)||void 0===n?void 0:null===(i=n.attrs)||void 0===i?void 0:i.transform)==="capitalize"?this.message.toString().toLocaleLowerCase():this.message)+`</div>
      <div class="close-notification">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6Z"/></svg>
      </div>`,o=document.createElement("div");o.className="toast-notification",o.innerHTML=l;let r=document.getElementsByClassName("toast-notification");3===r.length&&r[0]&&r[0].parentNode&&r[0].parentNode.removeChild(r[0]),o&&(o.style.cssText=`min-width:200px;
        height:auto;
        background-color:white;
        border-radius:10px;
        box-shadow:rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
        text-align:center;
        align-items: center;
        display:flex;
        gap:10px;
        padding:16px 8px;
        justify-content:center;
      `),this.$element=o,this.$wrapper&&this.$wrapper.appendChild(this.$element)}addCloseBtn(){if(this.$element){let t=this.$element.querySelector(".close-notification");t&&(t.style.cssText="width: 16px; height: 16px; cursor: pointer; display: flex; align-items: center;",t.addEventListener("click",()=>{this.$element&&this.$element.remove()}))}}success({message:t,duration:e,typo:i}){this.message=t,this.type="success",this.duration=e,this.typo=i,this.createNotify()}error({message:t,duration:e,typo:i}){this.message=t,this.type="error",this.duration=e,this.typo=i,this.createNotify()}warning({message:t,duration:e,typo:i}){this.message=t,this.type="warning",this.duration=e,this.typo=i,this.createNotify()}getColor(){switch(this.type){case"success":default:return"#52C41A";case"error":return"#EA3335";case"warning":return"#f1c40f"}}constructor(){m(this,"message","notification"),m(this,"type","success"),m(this,"duration",1e3),m(this,"$element",null),m(this,"$wrapper",void 0),m(this,"typo",void 0),m(this,"getSingleColorVariable",t=>{if(t)return t&&"string"==typeof t&&((null==t?void 0:t.startsWith("#"))||(null==t?void 0:t.startsWith("rgb"))||(null==t?void 0:t.startsWith("hsl"))||(null==t?void 0:t.startsWith("transparent")))?t:`var(--g-c-${t}, ${t})`}),m(this,"composeStyle",()=>{if(this.typo){var t,i;let n=this.typo.attrs,l=this.typo.custom;return e({"font-family":v(l),"font-size":(null==l?void 0:null===(t=l.fontSize)||void 0===t?void 0:t.desktop)?null==l?void 0:null===(i=l.fontSize)||void 0===i?void 0:i.desktop:void 0,"font-weight":(null==n?void 0:n.bold)?"bold":(null==l?void 0:l.fontWeight)?null==l?void 0:l.fontWeight:void 0,"letter-spacing":null==l?void 0:l.letterSpacing,"line-height":null==l?void 0:l.lineHeight,"font-style":(null==n?void 0:n.italic)?"italic":void 0,"text-decoration-line":(null==n?void 0:n.underline)?"underline":void 0,"text-transform":null==n?void 0:n.transform,color:this.getSingleColorVariable(null==n?void 0:n.color)})}})}}let S=t=>t.substring(1),w=(t,e)=>{if(t){if(e){n(t,e);return}!function(t,e=700){if(!t)return;let{startPosition:i,distance:n}=function(t){let e=t.getBoundingClientRect().top+window.pageYOffset,i=window.pageYOffset;return{targetPosition:e,startPosition:i,distance:e-i}}(t),l=t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,o=null;requestAnimationFrame(function t(r){null===o&&(o=r);let a=r-o,s=l(Math.min(a/e,1));window.scrollTo(0,i+n*s),a<e&&requestAnimationFrame(t)})}(t)}},q=t=>{t&&t.scrollIntoView({behavior:"smooth"})},$=(t,e,i,n)=>{try{if(t&&"DIALOG"===t.tagName){var l;null===(l=t.parentNode)||void 0===l||l.openModal()}"scroll-to-top"===e&&E(i),n&&(w(n,i),setTimeout(()=>{window.location.hash=`#${e}`},300))}catch(t){console.info("Handle link clicked error",t)}},E=t=>{let e=document.documentElement;if(t){n(e,t);return}window.scrollTo({top:0,behavior:"smooth"})};(()=>{let t=window.location.hash;if(t){window.history.scrollRestoration="manual";let e=()=>{let n=i({query:`[id='${S(t)}']`});setTimeout(()=>q(n),100),document.removeEventListener("DOMContentLoaded",e)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}})(),(()=>{let t=document.querySelectorAll('a[href^="#"]');t.forEach(t=>{let e=t.getAttribute("href");if(!e||"#"===e)return;let n=S(e),l=i({query:`[data-gp-dialog-id='${n}']`}),o=i({query:`[id='${n}']`}),r=Number(t.getAttribute("data-scroll-speed"));t.addEventListener("click",t=>{t.preventDefault(),$(l,n,r,o)})})})(),(z=H||(H={})).Percentage="percentage",z.FixedAmount="fixed_amount",z.NoDiscount="no_discount";let k=t=>{var e;if(!t)return null;let i=t.closest(".product-bundle-item");return{quantity:Number(null==i?void 0:i.getAttribute("quantity")),discountValue:Number(null==i?void 0:i.getAttribute("discountValue")),discountType:null!==(e=null==i?void 0:i.getAttribute("discountType"))&&void 0!==e?e:H.NoDiscount}},A=t=>{var e,i,n;return(null===(i=null===(n=t.closest("gp-product"))||void 0===n?void 0:n.querySelector("gp-product-variants"))||void 0===i?void 0:null===(e=i.getState)||void 0===e?void 0:e.call(i))||""},O=[".appstle_sub_widget",".recharge-subscription-widget"],C="kaching-bundles-block",x=t=>{var e;return(null==t?void 0:t.closest("gp-sticky"))?!!(null===(e=document)||void 0===e?void 0:e.getElementsByTagName(C).length):!!(null==t?void 0:t.getElementsByClassName("gp-kaching-bundles").length)},D=t=>{var e,i,n;let l=null!==(i=null==t?void 0:t.querySelector(C))&&void 0!==i?i:null===(e=document)||void 0===e?void 0:e.querySelector(C);return null!==(n=null==l?void 0:l.selectedVariants())&&void 0!==n?n:null},F=t=>{let e=D(t),i=new FormData;if(!e)return;let n=["id","quantity","product-quantity","product-id"],l=L(t),r=0;e.forEach(({variantId:t,quantity:e,properties:o})=>{i.append(`items[${r}][quantity]`,e.toString()),i.append(`items[${r}][id]`,t.toString());let a={...l,...o};Object.keys(a).forEach(t=>{var e;i.append(`items[${r}][properties][${t}]`,null!==(e=a[t])&&void 0!==e?e:""),n.push(`properties[${t}]`)}),r++});let a=o();return a&&a.forEach(t=>{i.append(`items[${r}][quantity]`,t.quantity.toString()),i.append(`items[${r}][id]`,t.id.toString()),r++}),{data:i,ignoreFields:n}},L=t=>{let e={},i=null==t?void 0:t.querySelectorAll('input[name^="properties["]');return null==i||i.forEach(t=>{var i;if(!t)return;let n=null==t?void 0:null===(i=t.name)||void 0===i?void 0:i.match(/properties\[(.*?)\]/);if(n){let i=n[1];if(!i)return;e[i]=t.value}}),e},T=t=>{let e=null==t?void 0:t.getElementsByClassName("gp-vitals");return!!e&&!((null==e?void 0:e.length)<=0)},B=t=>{var e;let i=null==t?void 0:t.getElementsByClassName("gp-vitals"),n=null==i?void 0:null===(e=i[0])||void 0===e?void 0:e.querySelectorAll("select");if(!n||(null==n?void 0:n.length)<=0)return null;let l={};return null==n||n.forEach(t=>{let e=t.value,i=l[e];i?l[e]=`${parseInt(i)+1}`:l[e]="1"}),l},I=t=>{var e;let i=null==t?void 0:t.querySelector(".gp-vitals #bundle-volume-discounts");if(!i)return;let n=i.querySelectorAll("form ul li");if(n.length){for(let t in n){let i=null===(e=n[t])||void 0===e?void 0:e.querySelector("input");if(null==i?void 0:i.checked)return null==i?void 0:i.value}return 0}},M=t=>{let e=B(t),i=new FormData;if(!e)return;let n=0;for(let[t,l]of Object.entries(e))i.append(`items[${n}][quantity]`,l),i.append(`items[${n}][id]`,t),n++;let l=o();return l&&l.forEach(t=>{i.append(`items[${n}][quantity]`,t.quantity.toString()),i.append(`items[${n}][id]`,t.id.toString()),n++}),{data:i,ignoreFields:["id","quantity","product-quantity","product-id"]}},N=new RegExp(/^(?:[^<>()[\]\\.,;:\s@"]+(?:\.[^<>()[\]\\.,;:\s@"]+)*|".+")@(?:\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\]|(?:[a-zA-Z\-\d]+\.)+[a-zA-Z]{2,})$/),R=(t,e)=>{let i=W(t,null==e?void 0:e.type,null==e?void 0:e.min),n=V(t,null==e?void 0:e.type,null==e?void 0:e.max),l=null==e||!e.required||_(t),o=U(t,null==e?void 0:e.type);return{isValid:i&&n&&l&&o,isMin:i,isMax:n,isRequired:l,isType:o}};function P(t){return void 0!==t&&/^[+-]?\d+(?:\.\d+)?$/.test(t)}let W=(t,e,i)=>{if(void 0===i||!i)return!0;switch(e){case"string":case"email":return!!t&&t.length>=i;case"number":return P(t)&&Number(t)>=i;default:return!0}},V=(t,e,i)=>{if(!i||!t)return!0;switch(e){case"string":case"email":return t.length<=i;case"number":return P(t)&&Number(t)<=i;default:return!0}},_=t=>!!t,U=(t,e)=>{if(void 0===t)return!0;switch(e){case"string":return"string"==typeof t;case"number":return P(t);case"boolean":return"boolean"==typeof t||"true"===t||"false"===t;case"array":return!!t||Array.isArray(t);case"email":return"string"==typeof t&&N.test(t);default:return!1}};function j(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var z,H,G=()=>class extends GP.Component{connectedCallback(){let t=this.closest("gp-product");if((null==t?void 0:t.getState)&&t.getState("isReady")){this.rootInit();return}null==t||t.addEventListener("gp:product-init",()=>{requestAnimationFrame(()=>{this.context=null==t?void 0:t.context,this.rootInit()})})}constructor(t){super(),j(this,"initFunc",void 0),j(this,"rootInit",()=>{let t=this.closest(".gps > section");if(null==t?void 0:t.classList.contains("gps-lazy")){null==t||t.addEventListener("GpLazyLoaded",this.rootInit);return}null==t||t.removeEventListener("GpLazyLoaded",this.rootInit),this.initFunc&&this.initFunc()}),this.initFunc=t}};function Y(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function Q(t,e,i){if(!e.has(t))throw TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function X(t,e){var i=Q(t,e,"get");return i.get?i.get.call(t):i.value}function Z(t,e,i){Y(t,e),e.set(t,i)}function J(t,e,i){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return i}function K(t,e){Y(t,e),e.add(t)}function tt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var te=()=>{var t,e,n,l,r,a,s,u,d,c,h,v,p,f,g,b,m,w,q,E;return t=new WeakMap,e=new WeakSet,n=new WeakSet,l=new WeakMap,r=new WeakMap,a=new WeakSet,s=new WeakSet,u=new WeakSet,d=new WeakSet,c=new WeakSet,h=new WeakSet,v=new WeakMap,p=new WeakMap,f=new WeakSet,g=new WeakSet,b=new WeakSet,m=new WeakSet,w=new WeakSet,q=new WeakSet,E=new WeakSet,class extends G(){checkPreselectedVariants(t){let e=Array.from(t).find(t=>{let e=t.parentNode;return"none"!==window.getComputedStyle(e).display});return!e||"true"===e.getAttribute("has-pre-selected")}buildFormData(t,e){let i=this.getFormDataDefault(t,e),n=this.extractFormDataForThirdPartyApp(t),l=this.handleFormData(i,{formDataThirdParty:n},{formEl:t});return l}getFormDataDefault(t,e){var i,n,l,o;let r=new FormData(t);if((null===(i=r)||void 0===i?void 0:i.fd)&&(r=r.fd),!O.some(e=>(null==t?void 0:t.querySelector(`${e}`))!==null)){let e=t.querySelector('input[name="selling_plan"]');e&&r.append("selling_plan",null==e?void 0:e.value)}let a=null===(l=this.closest("gp-product"))||void 0===l?void 0:null===(n=l.getState())||void 0===n?void 0:n.productUrl;try{let t=e.cart;r.append("sections",null!==t&&"function"==typeof t.getSectionsToRender?t.getSectionsToRender().map(t=>t.id).join(","):"cart-drawer,cart-icon-bubble")}catch(t){console.error(t),r.append("sections","cart-drawer,cart-icon-bubble")}return r.append("section_url",null!==(o=null!=a?a:window.location.pathname)&&void 0!==o?o:"/cart"),r}extractFormDataForThirdPartyApp(t){let e=T(t);if(e){let e=M(t),i=I(t);if(i){let t=(null==e?void 0:e.data)||new FormData;if(t.append("quantity",i),!(null==e?void 0:e.data))return{data:t,ignoreFields:["quantity"]}}return e}let i=x(t);if(i){let e=F(t);return e}let n=null==t?void 0:t.querySelector(".skio-plan-picker");if(n){let t=Array.from(n.querySelectorAll("input")).reduce((t,e)=>(e.value&&t.append(e.name,e.value),t),new FormData);return{data:t,ignoreFields:[]}}}handleFormData(t,e,i){var n,l;let r=[],a=new FormData;(null===(n=a)||void 0===n?void 0:n.fd)&&(a=a.fd);let s=e.formDataThirdParty;if(s)s.data.forEach((t,e)=>{a.append(e,t)}),r=s.ignoreFields;else{let t=o();t&&t.forEach((t,e)=>{a.append(`items[${e}][quantity]`,t.quantity.toString()),a.append(`items[${e}][id]`,t.id.toString())})}let u=null==i?void 0:null===(l=i.formEl)||void 0===l?void 0:l.querySelector(".gp-property_checkbox");return t.forEach((t,e)=>{if(!(r&&r.includes(e))){if(u&&a.has(e)){a.set(e,`${a.get(e)}, ${t}`);return}a.set(e,t)}}),a}validateFileUpload(t){let e=Array.from((null==t?void 0:t.querySelectorAll("gp-file-upload"))||[]);if(!e)return!0;for(let t of e){let e=null==t?void 0:t.querySelector(".gp-input_picker"),i=null==t?void 0:t.querySelector(".error-message");null==i||i.classList.add("gp-hidden");let n=Number(null==e?void 0:e.getAttribute("data-file-count"))||0,l=(null==e?void 0:e.getAttribute("data-required"))==="true";if(l&&0===n)return i&&(i.textContent="Image upload is required.",i.classList.remove("gp-hidden")),!1}return!0}dispatchEventAfterSubmit(t){if(!this.trigger)return;let e=this.querySelectorAll("button");e.forEach(e=>{let i=e.getAttribute("gp-data-hidden");if("true"===i)return;let n=new CustomEvent("gp:after-submit",{bubbles:!1,cancelable:!0,detail:{data:t}});e.dispatchEvent(n)})}triggerAddCartSuccess(t){J(this,f,_).call(this,t)}updateContentButtonOutStock(t){var e;let i=null===(e=this.$buttonSoldOut)||void 0===e?void 0:e.querySelector(".gp-content-product-button");i&&(i.innerHTML=t)}constructor(){super(()=>{this.init()}),K(this,e),K(this,n),K(this,a),K(this,s),K(this,u),K(this,d),K(this,c),K(this,h),K(this,f),K(this,g),K(this,b),K(this,m),K(this,w),K(this,q),K(this,E),tt(this,"quantity",void 0),tt(this,"inventoryQuantity",void 0),tt(this,"variantSelectedID",void 0),tt(this,"$button",void 0),tt(this,"$buttonSoldOut",void 0),tt(this,"$buttonUnavailable",void 0),tt(this,"totalVariant",void 0),tt(this,"disabled",void 0),tt(this,"errorMessage",void 0),tt(this,"variantSelectionRequiredMessage",void 0),tt(this,"successMessage",void 0),tt(this,"enableSuccessMessage",!1),tt(this,"enableErrorMessage",!1),Z(this,t,{writable:!0,value:""}),tt(this,"productButtonSetting",void 0),tt(this,"productNotificationStyles",void 0),tt(this,"currentVariantSelected",null),tt(this,"bundleItem",void 0),tt(this,"linkButtonRedirect",void 0),tt(this,"labelUnavailableTranslate",void 0),tt(this,"labelOutOfStockTranslate",void 0),tt(this,"SUPPORTED_ADD_UPSELL_ITEM_THEMES",["Shrine PRO"]),tt(this,"init",()=>{var i,l,o,r,a,s,u,d,c,h,p,f,g,b,m,y,S,q;let $=this.closest(".product-bundle-item");this.bundleItem=k($),this.$button=this.querySelector("button.gp-button-atc"),this.$buttonSoldOut=this.querySelector("button.gp-button-sold-out"),this.$buttonUnavailable=this.querySelector("button.gp-button-unavailable"),this.productButtonSetting=this.getState("setting"),this.productNotificationStyles=this.getState("styles"),this.totalVariant=this.getState("totalVariant"),this.quantity=null===(i=this.getContext("quantity"))||void 0===i?void 0:i.toString(),J(this,e,C).call(this),this.disabled=null===(o=this.getContext("variantSelected"))||void 0===o?void 0:null===(l=o.available)||void 0===l?void 0:l.toString(),this.currentVariantSelected=this.getContext("variantSelected"),this.errorMessage=null!==(h=null===(r=this.productButtonSetting)||void 0===r?void 0:r.errorMessage)&&void 0!==h?h:"Something went wrong",this.variantSelectionRequiredMessage=this.getAttribute("data-variant-selection-required-message")||"Please select a variant to add product to cart",this.successMessage=null!==(p=null===(a=this.productButtonSetting)||void 0===a?void 0:a.successMessage)&&void 0!==p?p:"Added to cart",this.enableSuccessMessage=null!==(f=null===(s=this.productButtonSetting)||void 0===s?void 0:s.enableSuccessMessage)&&void 0!==f&&f,this.enableErrorMessage=null!==(g=null===(u=this.productButtonSetting)||void 0===u?void 0:u.enableErrorMessage)&&void 0!==g&&g,q=null!==(b=null===(d=this.productButtonSetting)||void 0===d?void 0:d.errorType)&&void 0!==b?b:"built-in",function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=i}}(this,Q(this,t,"set"),q),J(this,w,H).call(this),J(this,n,D).call(this),null===(c=this.$button)||void 0===c||c.addEventListener("click",X(this,v)),this.linkButtonRedirect=null!==(m=this.getAttribute("gp-href"))&&void 0!==m?m:"",this.labelUnavailableTranslate=null!==(y=this.getAttribute("gp-label-unavailable"))&&void 0!==y?y:"Unavailable",this.labelOutOfStockTranslate=null!==(S=this.getAttribute("gp-label-out-of-stock"))&&void 0!==S?S:"Out of stock"}),tt(this,"updateDataHiddenInteractionForOutOfStock",t=>{var e,i;null===(e=this.$button)||void 0===e||e.setAttribute("gp-data-hidden","true"),null===(i=this.$buttonUnavailable)||void 0===i||i.setAttribute("gp-data-hidden","true"),null==t||t.setAttribute("gp-data-hidden","false")}),tt(this,"updateDataHiddenInteractionForUnavailable",t=>{var e,i;null===(e=this.$button)||void 0===e||e.setAttribute("gp-data-hidden","true"),null===(i=this.$buttonSoldOut)||void 0===i||i.setAttribute("gp-data-hidden","true"),null==t||t.setAttribute("gp-data-hidden","false")}),tt(this,"updateDataHiddenInteractionForATC",()=>{var t,e,i;null===(t=this.$button)||void 0===t||t.setAttribute("gp-data-hidden","false"),null===(e=this.$buttonSoldOut)||void 0===e||e.setAttribute("gp-data-hidden","true"),null===(i=this.$buttonUnavailable)||void 0===i||i.setAttribute("gp-data-hidden","true")}),tt(this,"showButtonDisable",t=>{var e,i,n,l;null===(e=this.$button)||void 0===e||e.setAttribute("disabled","disabled"),null===(n=this.$button)||void 0===n||null===(i=n.parentElement)||void 0===i||i.classList.add("!gp-hidden"),null==t||null===(l=t.parentElement)||void 0===l||l.classList.remove("!gp-hidden")}),tt(this,"hiddenButtonDisable",t=>{var e,i,n,l;null===(e=this.$button)||void 0===e||e.removeAttribute("disabled"),null===(n=this.$button)||void 0===n||null===(i=n.parentElement)||void 0===i||i.classList.remove("!gp-hidden"),null==t||null===(l=t.parentElement)||void 0===l||l.classList.add("!gp-hidden"),this.updateDataHiddenInteractionForATC()}),tt(this,"setErrorStyle",t=>{t.style.border="1px solid red"}),tt(this,"fieldsetValidate",()=>{let t=!0,e=this.closest("form"),i=null==e?void 0:e.querySelectorAll('[data-required="true"]');return null==i||i.forEach(e=>{let i=e.querySelectorAll("input[name]");i.forEach(i=>{""===i.value&&(t=!1,this.setErrorStyle(e))})}),t}),tt(this,"getInputInvalid",()=>{let t=this.closest("form"),e=null==t?void 0:t.querySelectorAll("input:invalid");return e}),tt(this,"setErrorForInputs",()=>{let t=this.getInputInvalid();null==t||t.forEach(t=>{this.setErrorStyle(t)})}),tt(this,"formValidate",()=>{let t=this.closest("form"),e=this.fieldsetValidate();return(null==t?void 0:t.reportValidity())&&e}),Z(this,l,{writable:!0,value:()=>{setTimeout(function(){try{"function"==typeof SLIDECART_UPDATE&&SLIDECART_UPDATE(),"function"==typeof SLIDECART_OPEN&&SLIDECART_OPEN()}catch(t){console.log(".")}},1e3)}}),Z(this,r,{writable:!0,value:t=>{if(this.bundleItem){var e,i;t.set("quantity",`${null!==(i=null===(e=this.bundleItem)||void 0===e?void 0:e.quantity)&&void 0!==i?i:"1"}`)}}}),tt(this,"handleOpenCartDrawer",(t,e)=>{var i,n,l,o,r;let a=new CustomEvent("gp:open-cart-drawer",{bubbles:!0,cancelable:!0,detail:{data:t},composed:!0});if(document.dispatchEvent(a),(null===(n=window)||void 0===n?void 0:null===(i=n.GPF)||void 0===i?void 0:i.openCartDrawer)&&"function"==typeof window.GPF.openCartDrawer){try{window.GPF.openCartDrawer(t)}catch(t){console.error(t.message),window.location.href=null!==(l=this.linkButtonRedirect)&&void 0!==l?l:"/cart"}return}if(null!==e&&"function"==typeof e.renderContents){e.classList.contains("is-empty")&&e.classList.remove("is-empty");try{t.sections?e.renderContents(t):Promise.all([fetch("?sections=cart-drawer"),fetch("?sections=cart-icon-bubble")]).then(([t,e])=>{if(t.ok&&e.ok)return Promise.all([t.json(),e.json()])}).then(i=>{var n,l;let o={...t,sections:{"cart-drawer":null==i?void 0:null===(n=i[0])||void 0===n?void 0:n["cart-drawer"],"cart-icon-bubble":null==i?void 0:null===(l=i[1])||void 0===l?void 0:l["cart-icon-bubble"]}};e.renderContents(o)}).catch(t=>{throw Error("Failed to fetch cart sections",t)})}catch(t){console.error(t.message),window.location.href=null!==(o=this.linkButtonRedirect)&&void 0!==o?o:"/cart"}return}window.location.href=null!==(r=this.linkButtonRedirect)&&void 0!==r?r:"/cart"}),Z(this,v,{writable:!0,value:t=>{if(t.preventDefault(),t.stopPropagation(),!this.currentVariantSelected&&this.totalVariant&&this.totalVariant>1){J(this,E,te).call(this,this.variantSelectionRequiredMessage,!0);return}this.setContext("isSubmit",!0);let e=this.getContext("properties"),i=null==e?void 0:e.some(t=>{let e=R(t.value,t.validation);return!e.isValid});i||(J(this,a,L).call(this),X(this,p).call(this))}}),Z(this,p,{writable:!0,value:()=>{window.dispatchEvent(new CustomEvent("gp:add-to-cart",{bubbles:!0,cancelable:!0,detail:null,composed:!0}))}})}};function C(){var t;let e=new URL(window.location.href),i=e.searchParams.get("variant"),n=null===(t=this.closest("gp-product"))||void 0===t?void 0:t.querySelectorAll("gp-product-variants");if(!n||0===n.length)return;let l=this.checkPreselectedVariants(n);i||l||this.setContext("variantSelected",void 0)}function D(){var t,e;let i=isNaN(parseInt(null!==(t=this.inventoryQuantity)&&void 0!==t?t:"0"))?parseInt(null!==(e=this.inventoryQuantity)&&void 0!==e?e:"0"):0;if(void 0===this.disabled)return;"true"===this.disabled||i>0?this.hiddenButtonDisable(this.$buttonSoldOut):this.showButtonDisable(this.$buttonSoldOut);let n=this.getContext("currentSelectedOption"),l=this.getContext("variantSelected"),o=n&&Object.values(n).some(t=>"blank"===t);o&&((null==l?void 0:l.available)||!l)&&this.hiddenButtonDisable(this.$buttonSoldOut)}function L(){var t,e;let i=document.querySelector("cart-notification")||document.querySelector("cart-drawer"),n=this.closest("form"),o=this.formValidate(),a=this.validateFileUpload(n);if(!o){null==n||n.reportValidity(),this.setErrorForInputs();return}if(!a)return;if(!n){J(this,E,te).call(this,"not found form product");return}J(this,g,U).call(this);let s=this.buildFormData(n,{cart:i}),u=JSON.parse(null!==(e=this.getAttribute("gp-interaction-after-submit"))&&void 0!==e?e:"{}"),c=null===(t=window)||void 0===t?void 0:t.GP_CUSTOM_CART_URL,h=c||"/cart/add.js";X(this,r).call(this,s),fetch(h,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/javascript"},body:s}).then(async t=>t.ok?t.json():t.json().then(t=>{throw t})).then(t=>{var e;let n=null===(e=this.productButtonSetting)||void 0===e?void 0:e.actionEffect;"continue-shopping"===n&&(J(this,q,Y).call(this),X(this,l).call(this)),J(this,m,z).call(this),J(this,b,j).call(this),J(this,d,P).call(this,n,t,i),J(this,f,_).call(this,t),Object.keys(u).length>0&&Object.entries(u).map(([t])=>{this.dispatchEventAfterSubmit(Number(t))})}).catch(t=>{J(this,b,j).call(this),J(this,E,te).call(this,null==t?void 0:t.description)})}function B(){window.location.href="/checkout"}function N(){var t,e,n,l,o;let r=null===(e=this.productButtonSetting)||void 0===e?void 0:null===(t=e.customURL)||void 0===t?void 0:t.target,a=null===(l=this.productButtonSetting)||void 0===l?void 0:null===(n=l.customURL)||void 0===n?void 0:n.link,s=null!==(o=this.linkButtonRedirect)&&void 0!==o?o:a;if(s){if(s.startsWith("#")&&"#"!==s){let t=S(s),e=i({query:`[data-gp-dialog-id='${t}']`}),n=i({query:`[id='${t}']`}),l=this.querySelector("gp-button");if(!l)return;let o=Number(l.getAttribute("data-scroll-speed"));$(e,t,o,n);return}"_blank"===r?window.open(s,"_blank"):window.location.href=null!=s?s:""}}function P(t,e,i){switch(t){case"continue-shopping":J(this,c,W).call(this,i,e);break;case"go-to-url":J(this,c,W).call(this,i,e),J(this,u,N).call(this);break;case"buy-now":J(this,s,B).call(this);break;case"open-cart-drawer":this.handleOpenCartDrawer(e,i);break;default:J(this,h,V).call(this)}}function W(t,e){if(e&&e.sections&&e.sections.length){let i=(t,e=".shopify-section")=>new DOMParser().parseFromString(t,"text/html").querySelector(e).innerHTML,n=()=>{let t=document.getElementById("cart-icon-bubble");t&&e.sections["cart-icon-bubble"]&&(t.innerHTML=i(e.sections["cart-icon-bubble"]))},l=document.querySelector("cart-drawer");if(null!==l)try{null!==t&&"function"==typeof t.getSectionsToRender&&(t.getSectionsToRender().forEach(t=>{if(e.sections[t.id]){let n=t.selector?document.querySelector(t.selector):document.getElementById(t.id);n.innerHTML=i(e.sections[t.id],t.selector)}}),t.classList.contains("is-empty")&&t.classList.remove("is-empty"))}catch(t){console.error(t),n()}else n()}}function V(){let t=this.getContext("formId"),e=document.querySelector(`#${t}`);null==e||e.submit()}function _(t){let e=this.closest("form"),i=new CustomEvent("gp:add-to-cart-success",{detail:{data:t,payload:{formId:null==e?void 0:e.getAttribute("id")}}});window.dispatchEvent(i)}function U(){var t;null===(t=this.$button)||void 0===t||t.setAttribute("data-state","loading")}function j(){var t;null===(t=this.$button)||void 0===t||t.setAttribute("data-state","idle")}function z(){var t,e;let i=isNaN(parseInt(null!==(t=this.quantity)&&void 0!==t?t:"0"))?parseInt(null!==(e=this.quantity)&&void 0!==e?e:"0"):0;this.quantity&&(this.quantity=(i>=1?i-1:0).toString())}function H(){this.subscribeContext((t,e)=>{var i,n,l,o,r,a,s,u;this.currentVariantSelected=t.variantSelected;let d=A(this);if((null===(i=t.variantSelected)||void 0===i?void 0:i.id)!==(null===(n=e.variantSelected)||void 0===n?void 0:n.id)){if(this.$button){if(null===(r=t.variantSelected)||void 0===r?void 0:r.available)this.hiddenButtonDisable(this.$buttonSoldOut);else{if(this.showButtonDisable(this.$buttonSoldOut),!t.variantSelected&&"string"!=typeof(null==d?void 0:d.currentSelected)&&(null==d?void 0:d.currentSelected)){this.updateContentButtonOutStock(this.labelUnavailableTranslate||""),this.updateDataHiddenInteractionForUnavailable(this.$buttonUnavailable);return}this.updateContentButtonOutStock(this.labelOutOfStockTranslate||""),this.updateDataHiddenInteractionForOutOfStock(this.$buttonSoldOut)}}this.variantSelectedID&&(null===(l=t.variantSelected)||void 0===l?void 0:l.id)&&(this.variantSelectedID=t.variantSelected.id.toString()),this.quantity&&(this.quantity=null!==(a=null===(o=t.quantity)||void 0===o?void 0:o.toString())&&void 0!==a?a:"1")}t.quantity!=e.quantity&&this.quantity&&(this.quantity=null!==(u=null===(s=t.quantity)||void 0===s?void 0:s.toString())&&void 0!==u?u:"1");let c=t.currentSelectedOption&&Object.values(t.currentSelectedOption).some(t=>"blank"===t);c&&this.hiddenButtonDisable(this.$buttonSoldOut),t.variantSelected&&!t.variantSelected.available?(this.updateContentButtonOutStock(this.labelOutOfStockTranslate||""),this.showButtonDisable(this.$buttonSoldOut)):!t.variantSelected&&"string"!=typeof(null==d?void 0:d.currentSelected)&&(null==d?void 0:d.currentSelected)&&(this.showButtonDisable(this.$buttonSoldOut),this.updateContentButtonOutStock(this.labelUnavailableTranslate||""))})}function Y(){var t;this.enableSuccessMessage&&new y().success({message:this.successMessage,duration:5e3,typo:null===(t=this.productNotificationStyles)||void 0===t?void 0:t.successTypo})}function te(e,i){var n;J(this,b,j).call(this),this.enableErrorMessage&&new y().error({message:"built-in"===X(this,t)||i?e:this.errorMessage,duration:5e3,typo:null===(n=this.productNotificationStyles)||void 0===n?void 0:n.errorTypo})}};let ti=()=>{window.removeEventListener("gp-global-loaded",ti),customElements.get("gp-product-button")||customElements.define("gp-product-button",te())};"completed"===window.gpReadyState?ti():window.addEventListener("gp-global-loaded",ti),t.defineComponentProductButton=ti}({});
