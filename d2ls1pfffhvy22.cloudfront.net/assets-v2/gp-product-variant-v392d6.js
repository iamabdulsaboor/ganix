!function(){"use strict";let t="#121212";function e(t){var e,i,o;let l=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)$/.exec(t);if(!l)throw Error("Invalid RGB(A) format");function n(t){return("0"+t.toString(16)).slice(-2)}let a=parseInt(null!==(e=l[1])&&void 0!==e?e:"0"),r=parseInt(null!==(i=l[2])&&void 0!==i?i:"0"),s=parseInt(null!==(o=l[3])&&void 0!==o?o:"0"),d=l[4]?Math.round(255*parseFloat(l[4])):null,u=`#${n(a)}${n(r)}${n(s)}`;return null!==d?`${u}${n(d)}`:u}let i=t=>{var e;return`rgb(${null===(e=t.match(/\w\w/g))||void 0===e?void 0:e.map(t=>+`0x${t}`)})`},o=t=>{t=t.replace(/^#/,"");let e=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16);return .2126*e+.7152*i+.0722*o<128},l={normal:"",hover:"-hvr",focus:"-focus"},n={desktop:"",tablet:"-tablet",mobile:"-mobile"};function a(t){return void 0!==t}let r=(t,e,i)=>{if(!e)return{};if(i){let o=e[i];return[`-${null==l?void 0:l[i]}-${t}`,d(o)]}return Object.fromEntries(Object.entries(e).map(([e,i])=>"active"===e?[]:[`-${null==l?void 0:l[e]}-${t}`,d(i)]).filter(a))},s=(t,e)=>e?Object.entries(e).map(([e,i])=>"desktop"===e?Object.fromEntries(Object.entries(i).map(([e,i])=>"active"===e?[]:[`-${l[e]}-${t}`,d(i)]).filter(a)):Object.fromEntries(Object.entries(i).map(([i,o])=>"active"===i?[]:[`-${l[i]}-${t}-${e}`,d(o)]).filter(a))).reduce((t,e)=>({...t,...e}),{}):{},d=t=>{if(t)return t&&"string"==typeof t&&((null==t?void 0:t.startsWith("#"))||(null==t?void 0:t.startsWith("rgb"))||(null==t?void 0:t.startsWith("hsl"))||(null==t?void 0:t.startsWith("transparent")))?t:`var(--g-c-${t}, ${t})`},u=(t,e,i)=>{if(!e||!t)return{};let o=i&&"desktop"!==i?null==n?void 0:n[i]:"",a=null==l?void 0:l[t];return{[`-${a}-radius${o}`]:`var(--g-radius-${e})`}},p=(t,e,i)=>{if(!e||!t)return{};let o=i&&"desktop"!==i?null==n?void 0:n[i]:"",a=null==l?void 0:l[t];return{[`-${a}-bblr${o}`]:e.bblr,[`-${a}-bbrr${o}`]:e.bbrr,[`-${a}-btlr${o}`]:e.btlr,[`-${a}-btrr${o}`]:e.btrr}},v=t=>t?"desktop"in t||"tablet"in t||"mobile"in t?c(t):h(t):{},h=(t,e)=>{var i,o,l,n,a,r;let s={};switch(null==t?void 0:null===(i=t.normal)||void 0===i?void 0:i.radiusType){case"medium":case"large":case"small":Object.assign(s,u("normal",null==t?void 0:null===(n=t.normal)||void 0===n?void 0:n.radiusType,e));break;case"circle":case"none":case"custom":Object.assign(s,p("normal",t.normal,e))}switch(null==t?void 0:null===(o=t.hover)||void 0===o?void 0:o.radiusType){case"medium":case"large":case"small":Object.assign(s,u("hover",null==t?void 0:null===(a=t.hover)||void 0===a?void 0:a.radiusType,e));break;case"circle":case"none":case"custom":Object.assign(s,p("hover",t.hover,e))}switch(null==t?void 0:null===(l=t.focus)||void 0===l?void 0:l.radiusType){case"medium":case"large":case"small":Object.assign(s,u("focus",null==t?void 0:null===(r=t.focus)||void 0===r?void 0:r.radiusType,e));break;case"circle":case"none":case"custom":Object.assign(s,p("focus",t.focus,e))}return s},c=t=>{let e={};return Object.assign(e,h(null==t?void 0:t.desktop,"desktop")),Object.assign(e,h(null==t?void 0:t.tablet,"tablet")),Object.assign(e,h(null==t?void 0:t.mobile,"mobile")),e},g=t=>{var e,i;return(null==t?void 0:null===(e=t.active)||void 0===e?void 0:e.radiusType)==="custom"?p("normal",null==t?void 0:t.active):u("normal",null==t?void 0:null===(i=t.active)||void 0===i?void 0:i.radiusType)},y={"typography-heading-1-fontFamily":"h1-ff","typography-heading-1-fontSize":"h1-size","typography-heading-1-fontWeight":"h1-weight","typography-heading-1-lineHeight":"h1-lh","typography-heading-1-letterSpacing":"h1-ls","typography-heading-1-fontStyle":"h1-fs","typography-heading-2-fontFamily":"h2-ff","typography-heading-2-fontSize":"h2-size","typography-heading-2-fontWeight":"h2-weight","typography-heading-2-lineHeight":"h2-lh","typography-heading-2-letterSpacing":"h2-ls","typography-heading-2-fontStyle":"h2-fs","typography-heading-3-fontFamily":"h3-ff","typography-heading-3-fontSize":"h3-size","typography-heading-3-fontWeight":"h3-weight","typography-heading-3-lineHeight":"h3-lh","typography-heading-3-letterSpacing":"h3-ls","typography-heading-3-fontStyle":"h3-fs","typography-subheading-1-fontFamily":"sh1-ff","typography-subheading-1-fontSize":"sh1-size","typography-subheading-1-fontWeight":"sh1-weight","typography-subheading-1-lineHeight":"sh1-lh","typography-subheading-1-letterSpacing":"sh1-ls","typography-subheading-1-fontStyle":"sh1-fs","typography-subheading-2-fontFamily":"sh2-ff","typography-subheading-2-fontSize":"sh2-size","typography-subheading-2-fontWeight":"sh2-weight","typography-subheading-2-lineHeight":"sh2-lh","typography-subheading-2-letterSpacing":"sh2-ls","typography-subheading-2-fontStyle":"sh2-fs","typography-subheading-3-fontFamily":"sh3-ff","typography-subheading-3-fontSize":"sh3-size","typography-subheading-3-fontWeight":"sh3-weight","typography-subheading-3-lineHeight":"sh3-lh","typography-subheading-3-letterSpacing":"sh3-ls","typography-subheading-3-fontStyle":"sh3-fs","typography-paragraph-1-fontFamily":"p1-ff","typography-paragraph-1-fontSize":"p1-size","typography-paragraph-1-fontWeight":"p1-weight","typography-paragraph-1-lineHeight":"p1-lh","typography-paragraph-1-letterSpacing":"p1-ls","typography-paragraph-1-fontStyle":"p1-fs","typography-paragraph-2-fontFamily":"p2-ff","typography-paragraph-2-fontSize":"p2-size","typography-paragraph-2-fontWeight":"p2-weight","typography-paragraph-2-lineHeight":"p2-lh","typography-paragraph-2-letterSpacing":"p2-ls","typography-paragraph-2-fontStyle":"p2-fs","typography-paragraph-3-fontFamily":"p3-ff","typography-paragraph-3-fontSize":"p3-size","typography-paragraph-3-fontWeight":"p3-weight","typography-paragraph-3-lineHeight":"p3-lh","typography-paragraph-3-letterSpacing":"p3-ls","typography-paragraph-3-fontStyle":"p3-fs","color-brand":"c-brand","color-highlight":"c-highlight","color-text-1":"c-text-1","color-text-2":"c-text-2","color-text-3":"c-text-3","color-bg-1":"c-bg-1","color-bg-2":"c-bg-2","color-bg-3":"c-bg-3","color-line-1":"c-line-1","color-line-2":"c-line-2","color-line-3":"c-line-3","color-success":"c-success","color-info":"c-info","color-warning":"c-warning","color-error":"c-error","spacing-xxs":"s-xxs","spacing-xs":"s-xs","spacing-s":"s-s","spacing-m":"s-m","spacing-l":"s-l","spacing-xl":"s-xl","spacing-2xl":"s-2xl","spacing-3xl":"s-3xl","spacing-4xl":"s-4xl","spacing-5xl":"s-5xl","container-width":"ct-w","container-padding":"ct-p","text-shadow":"ts","box-shadow":"shadow"},m=t=>{let e=t.match(/(\d+)(.+)/);if(e&&3===e.length){var i;let t=Number(null!==(i=e[1])&&void 0!==i?i:0),o=e[2];return{value:t,unit:null!=o?o:"px"}}return{value:0,unit:"px"}},f=(t,e=!1)=>{let{styleAppliedFor:i,value:o,isEnableShadow:n}=t||{},{state:a}=t||{};if(a||(a="normal"),!i||!o||void 0===o.distance)return{};let{value:r,unit:s}=m(`${null==o?void 0:o.distance}`);return{[`-${e?"":null==l?void 0:l[a]}-${y[i]||i}`]:n?`${Math.cos(parseFloat(`${null==o?void 0:o.angle}`)*Math.PI/180)*parseFloat(`${r}`)}${s} ${Math.sin(parseFloat(`${null==o?void 0:o.angle}`)*Math.PI/180)*parseFloat(`${r}`)}${s} ${null==o?void 0:o.blur} ${"box-shadow"===i?(null==o?void 0:o.spread)+" ":""}${d(null==o?void 0:o.color)}`:"none"}},b=(t,e,i)=>{if(!t||!e)return{};let o={};for(let[l,n]of Object.entries(t))Object.assign(o,f({value:n,state:l,styleAppliedFor:e,isEnableShadow:null==i?void 0:i[l]}));return o},S=t=>Object.fromEntries(Object.entries(t).map(([t,e])=>[`--${t}`,e])),w=(t,e)=>e?{[`--${t}`]:null==e?void 0:e.normal,[`--hvr-${t}`]:null==e?void 0:e.hover,[`--focus-${t}`]:null==e?void 0:e.focus}:{},O=(t,e)=>{var i,o,l,n,a,r,s,d,u;return e?{[`--${t}`]:null==e?void 0:null===(i=e.desktop)||void 0===i?void 0:i.normal,[`--hvr-${t}`]:null==e?void 0:null===(o=e.desktop)||void 0===o?void 0:o.hover,[`--focus-${t}`]:null==e?void 0:null===(l=e.desktop)||void 0===l?void 0:l.focus,[`--${t}-tablet`]:null==e?void 0:null===(n=e.tablet)||void 0===n?void 0:n.normal,[`--hvr-${t}-tablet`]:null==e?void 0:null===(a=e.tablet)||void 0===a?void 0:a.hover,[`--focus-${t}-tablet`]:null==e?void 0:null===(r=e.tablet)||void 0===r?void 0:r.focus,[`--${t}-mobile`]:null==e?void 0:null===(s=e.mobile)||void 0===s?void 0:s.normal,[`--hvr-${t}-mobile`]:null==e?void 0:null===(d=e.mobile)||void 0===d?void 0:d.hover,[`--focus-${t}-mobile`]:null==e?void 0:null===(u=e.mobile)||void 0===u?void 0:u.focus}:{}},V=(t,e)=>({[`--${t}`]:null==e?void 0:e.desktop,[`--${t}-tablet`]:null==e?void 0:e.tablet,[`--${t}-mobile`]:null==e?void 0:e.mobile}),C=(t,e)=>{let i=(t,e,i)=>{let o=null==e?void 0:e[t],l=null==i?void 0:i[t];return l?"100%":o};return{desktop:i("desktop",t,e),tablet:i("tablet",t,e),mobile:i("mobile",t,e)}},E=t=>Object.entries(t).reduce((t,[e,i])=>null==i?t:{...t,[e]:i},{}),$=t=>{var e,i,o,l,n,a,r,s,d,u,p,v,h,c,g,y,m,f,b,S,V;if(!t)return;if("desktop"in t||"tablet"in t||"mobile"in t){let e={desktop:{normal:null===(n=t.desktop)||void 0===n?void 0:null===(l=n.normal)||void 0===l?void 0:l.border,hover:null===(r=t.desktop)||void 0===r?void 0:null===(a=r.hover)||void 0===a?void 0:a.border,focus:null===(d=t.desktop)||void 0===d?void 0:null===(s=d.focus)||void 0===s?void 0:s.border},tablet:{normal:null===(p=t.tablet)||void 0===p?void 0:null===(u=p.normal)||void 0===u?void 0:u.border,hover:null===(h=t.tablet)||void 0===h?void 0:null===(v=h.hover)||void 0===v?void 0:v.border,focus:null===(g=t.tablet)||void 0===g?void 0:null===(c=g.focus)||void 0===c?void 0:c.border},mobile:{normal:null===(m=t.mobile)||void 0===m?void 0:null===(y=m.normal)||void 0===y?void 0:y.border,hover:null===(b=t.mobile)||void 0===b?void 0:null===(f=b.hover)||void 0===f?void 0:f.border,focus:null===(V=t.mobile)||void 0===V?void 0:null===(S=V.focus)||void 0===S?void 0:S.border}};return O("bs",e)}let C={normal:null==t?void 0:null===(e=t.normal)||void 0===e?void 0:e.border,hover:null==t?void 0:null===(i=t.hover)||void 0===i?void 0:i.border,focus:null==t?void 0:null===(o=t.focus)||void 0===o?void 0:o.border};return w("bs",C)},x=t=>{var e,i,o,l,n,a,r,s,d,u,p,v,h,c,g,y,m,f,b,S,V;if(!t)return;if("desktop"in t||"tablet"in t||"mobile"in t){let e={desktop:{normal:null===(n=t.desktop)||void 0===n?void 0:null===(l=n.normal)||void 0===l?void 0:l.width,hover:null===(r=t.desktop)||void 0===r?void 0:null===(a=r.hover)||void 0===a?void 0:a.width,focus:null===(d=t.desktop)||void 0===d?void 0:null===(s=d.focus)||void 0===s?void 0:s.width},tablet:{normal:null===(p=t.tablet)||void 0===p?void 0:null===(u=p.normal)||void 0===u?void 0:u.width,hover:null===(h=t.tablet)||void 0===h?void 0:null===(v=h.hover)||void 0===v?void 0:v.width,focus:null===(g=t.tablet)||void 0===g?void 0:null===(c=g.focus)||void 0===c?void 0:c.width},mobile:{normal:null===(m=t.mobile)||void 0===m?void 0:null===(y=m.normal)||void 0===y?void 0:y.width,hover:null===(b=t.mobile)||void 0===b?void 0:null===(f=b.hover)||void 0===f?void 0:f.width,focus:null===(V=t.mobile)||void 0===V?void 0:null===(S=V.focus)||void 0===S?void 0:S.width}};return O("bw",e)}let C={normal:null==t?void 0:null===(e=t.normal)||void 0===e?void 0:e.width,hover:null==t?void 0:null===(i=t.hover)||void 0===i?void 0:i.width,focus:null==t?void 0:null===(o=t.focus)||void 0===o?void 0:o.width};return w("bw",C)},F=t=>{var e,i,o,l,n,a,d,u,p,v,h,c,g,y,m,f,b,S,w,O,V;if(!t)return;if("desktop"in t||"tablet"in t||"mobile"in t){let e={desktop:{normal:null===(n=t.desktop)||void 0===n?void 0:null===(l=n.normal)||void 0===l?void 0:l.color,hover:null===(d=t.desktop)||void 0===d?void 0:null===(a=d.hover)||void 0===a?void 0:a.color,focus:null===(p=t.desktop)||void 0===p?void 0:null===(u=p.focus)||void 0===u?void 0:u.color},tablet:{normal:null===(h=t.tablet)||void 0===h?void 0:null===(v=h.normal)||void 0===v?void 0:v.color,hover:null===(g=t.tablet)||void 0===g?void 0:null===(c=g.hover)||void 0===c?void 0:c.color,focus:null===(m=t.tablet)||void 0===m?void 0:null===(y=m.focus)||void 0===y?void 0:y.color},mobile:{normal:null===(b=t.mobile)||void 0===b?void 0:null===(f=b.normal)||void 0===f?void 0:f.color,hover:null===(w=t.mobile)||void 0===w?void 0:null===(S=w.hover)||void 0===S?void 0:S.color,focus:null===(V=t.mobile)||void 0===V?void 0:null===(O=V.focus)||void 0===O?void 0:O.color}};return s("bc",e)}let C={normal:null==t?void 0:null===(e=t.normal)||void 0===e?void 0:e.color,hover:null==t?void 0:null===(i=t.hover)||void 0===i?void 0:i.color,focus:null==t?void 0:null===(o=t.focus)||void 0===o?void 0:o.color};return r("bc",C)};function T(t,e){var i,o,l,n,a,r;if(!t||!e)return{};let s="desktop"!==e&&e?`-${e}`:"",{fontFamily:d}=null!==(r=null==t?void 0:t[e])&&void 0!==r?r:{};return{[`--size${s}`]:null==t?void 0:null===(i=t[e])||void 0===i?void 0:i.fontSize,[`--lh${s}`]:null==t?void 0:null===(o=t[e])||void 0===o?void 0:o.lineHeight,[`--fs${s}`]:null==t?void 0:null===(l=t[e])||void 0===l?void 0:l.fontStyle,[`--ff${s}`]:d?`var(--g-font-${d}, ${d})`:void 0,[`--weight${s}`]:null==t?void 0:null===(n=t[e])||void 0===n?void 0:n.fontWeight,[`--ls${s}`]:null==t?void 0:null===(a=t[e])||void 0===a?void 0:a.letterSpacing}}function A({fontFamily:t,fallbackFontFamily:e}){if(t)return`var(--g-font-${null==t?void 0:t.replace(/ /g,"-")}, '${t}'), ${e}`}let k=t=>Object.assign({},T(t,"desktop"),T(t,"tablet"),T(t,"mobile")),B=t=>{let e=null==t?void 0:t.fontFamily;if(e){if("string"==typeof e)return A({fontFamily:e,fallbackFontFamily:null==t?void 0:t.fallbackFontFamily});if("object"==typeof e&&"string"==typeof(null==e?void 0:e.value))return"theme"===e.type?`var(${null==e?void 0:e.value}), ${null==t?void 0:t.fallbackFontFamily}`:A({fontFamily:e.value,fallbackFontFamily:null==t?void 0:t.fallbackFontFamily})}},I=(t,e)=>t?E({...S({fs:(null==e?void 0:e.italic)?void 0:null==t?void 0:t.fontStyle,ff:B({fontFamily:null==t?void 0:t.fontFamily,fallbackFontFamily:"var(--g-font-body)"}),weight:(null==e?void 0:e.bold)?void 0:null==t?void 0:t.fontWeight,ls:null==t?void 0:t.letterSpacing}),...V("size",null==t?void 0:t.fontSize),...V("lh",null==t?void 0:t.lineHeight)}):{},N=t=>t?E({...S({fs:(null==t?void 0:t.italic)?"italic":void 0,weight:(null==t?void 0:t.bold)?"bold":void 0,c:d(null==t?void 0:t.color),tt:null==t?void 0:t.transform,tdl:(null==t?void 0:t.underline)?"underline":void 0,tdc:d(null==t?void 0:t.color)})}):{},P=(t,e,i)=>t?{...I(t.custom,t.attrs),...!i&&N(t.attrs)}:{...(null==e?void 0:e.type)?{}:k(null==e?void 0:e.custom)},L=t=>{if(t)return t&&"string"==typeof t&&((null==t?void 0:t.startsWith("#"))||(null==t?void 0:t.startsWith("rgb"))||(null==t?void 0:t.startsWith("hsl"))||(null==t?void 0:t.startsWith("transparent")))?t:`var(--g-c-${t}, ${t})`},j=(t,e)=>"string"!=typeof e||!e||(null==e?void 0:e.startsWith("#"))||(null==e?void 0:e.startsWith("rgb"))||(null==e?void 0:e.startsWith("hsl"))||(null==e?void 0:e.startsWith("transparent"))?"":`gp-${t}-g-${e}`,W=(t,e)=>e?Object.entries(e).map(([e,i])=>"normal"===e?j(t,i):`${e}:${j(t,i)}`).join(" "):"",_=(t,e)=>{if(!e)return{};let i={normal:"",hover:"-hvr",focus:"-focus"};return Object.fromEntries(Object.entries(e).map(([e,o])=>"active"===e?[]:[`-${null==i?void 0:i[e]}-${t}`,L(o)]))};function D(...t){return t.map(R).filter(Boolean).join(" ")}function R(t){return"string"==typeof t?t:"object"==typeof t&&null!==t&&Object.keys(t).filter(e=>t[e]).join(" ")}function z(t){return t.replace(/['"\\]/g,"\\$&")}let M=()=>window.innerWidth<768?"mobile":window.innerWidth>=768&&window.innerWidth<1025?"tablet":"desktop";function U(t){return!!t&&(null==t?void 0:t.available)}let H=t=>{let e;return e=t?"string"==typeof t?new URL(t):t:new URL(window.location.href),RegExp("/products/","i").test(e.pathname)};function q(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var G,J,X,K,Q,Y,Z,tt,te,ti,to=()=>class extends GP.Component{connectedCallback(){let t=this.closest("gp-product");if((null==t?void 0:t.getState)&&t.getState("isReady")){this.rootInit();return}null==t||t.addEventListener("gp:product-init",()=>{requestAnimationFrame(()=>{this.context=null==t?void 0:t.context,this.rootInit()})})}constructor(t){super(),q(this,"initFunc",void 0),q(this,"rootInit",()=>{let t=this.closest(".gps > section");if(null==t?void 0:t.classList.contains("gps-lazy")){null==t||t.addEventListener("GpLazyLoaded",this.rootInit);return}null==t||t.removeEventListener("GpLazyLoaded",this.rootInit),this.initFunc&&this.initFunc()}),this.initFunc=t}};let tl=["desktop","tablet","mobile"];function tn(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}(G=Y||(Y={})).EXACT="exact",G.ABOVE="above",G.BELOW="below",G.EXACT_OR_ABOVE="exact_or_above",G.EXACT_OR_BELOW="exact_or_below",G.BETWEEN="between",(J=Z||(Z={})).INVENTORY_STATUS="inventory_status",J.DISCOUNT_PRICE="discount_price",J.PRICE_RANGE="price_range",J.PRODUCT_TAGS="product_tags",J.CREATION_DATE="creation_date",(X=tt||(tt={})).IN_STOCK="in_stock",X.OUT_OF_STOCK="out_of_stock",(K=te||(te={})).DURATION="duration",K.EXACT_DATE="exact_date",K.BETWEEN_DATES="between_dates",(Q=ti||(ti={})).PERCENT="percent",Q.FIXED="fixed";let ta="variant";var tr=()=>class extends to(){shouldSelectVariant(){let t=new URL(window.location.href),e=t.searchParams.get(ta),i=this.getSetting(),o=this.checkVariantVisibility();return o&&((null==i?void 0:i.hasPreSelected)||e)}checkVariantVisibility(){let t=M(),e=this.getState("displayState");return!e||(null==e?void 0:e[t])}determineVariantToSelect(){let t=this.getVariants(),e=this.getCurrentSelectedOption(),i=this.getVariantIdFromUrl(),o=this.getSelectedVariant(t,e,i);if(null==o?void 0:o.options){let{options:t}=o,e={};t.forEach(t=>{e[t.name]=t.value})}return U(o)?o:this.getFirstInStockVariant(t)}getVariantIdFromUrl(){let t=new URL(window.location.href),e=t.searchParams.get(ta);if(e)return e}updateUIForSelection(t){this.changeVariantLabel(t),this.setStyleOptionValue(t,{loaded:!0})}updateStateAndTriggerChange(t){this.setContext("variantSelected",t),this.setState("variantSelected",t),this.createEventChange(t);let e=this.getCurrentSelectedOption();this.updateUIForSelection(e)}firstTimeActiveOption(){let t=this.getVariantIdFromUrl(),e=this.getCurrentSelectedOption();if(this.updateUIForSelection(e),!this.shouldSelectVariant())return;this.interactionListenerLoaded(e),this.isFirstChangeVariant=!0,this.isChangeVariant=!0;let i=this.determineVariantToSelect();t&&(null==i?void 0:i.id)!==t&&this.setVariantParams(null==i?void 0:i.id),i&&this.updateStateAndTriggerChange(i)}setStyles(t,e){t&&(t.style.cssText+=e)}removeStyles(t,e){t&&e.forEach(e=>t.style.removeProperty(e))}checkValidUrlToSetParam(t,e){if(!H(t)||!e)return!1;let i=new URL(e,window.location.origin),o=this.getProductHandleFromPath(i.pathname),l=this.getProductHandleFromPath(t.pathname);return l===o}updateUrlVariantParam(t,e){e?t.searchParams.set(ta,e):t.searchParams.delete(ta)}getProductHandleFromPath(t){return t.split("/products/")[1]}getLineBorderColor(e){return o(e)?"#ffffff":t}constructor(){super(()=>{this.init()}),tn(this,"isChangeVariant",!1),tn(this,"isFirstChangeVariant",!1),tn(this,"soldOutStyle",void 0),tn(this,"uid",void 0),tn(this,"optionIdsMapping",{}),tn(this,"observerInit",()=>{this.renderVariantPreset(),this.firstTimeActiveOption(),this.hasSupportFetchFirstTimeFeatureExtendVariant()&&this.activeFeatureExtendVariant()}),tn(this,"hasSupportFetchFirstTimeFeatureExtendVariant",()=>{var t;return this.isApplyNewFeatureExtendVariant()&&(null===(t=this.getState("setting"))||void 0===t?void 0:t.optionType)==="singleOption"}),tn(this,"init",async()=>{var t;this.soldOutStyle=null===(t=this.getSetting())||void 0===t?void 0:t.soldOutStyle,this.formatPrice(),this.changeImageSize(),this.observerInit(),this.setEventForOptionValue(),this.setEventForVariantDropdown(),this.setEventForVariantGroupDropdown(),this.subscribeContext((t,e)=>{let i=this.getSelectedOptionByVariant(t.variantSelected),o=this.getSelectedOptionByVariant(e.variantSelected);this.checkDispatchInteraction(i,o)&&this.dispatchInteractionChangeOptions(i)})}),tn(this,"changeImageSize",()=>{let t=Array.from(this.getElementsByClassName("gp-shopify-image"));t.forEach(t=>{let e=t.width,i=t.src,o=this.getImageSize(),l=i.lastIndexOf(o);e>200&&-1!==l&&(t.src=i.substring(0,l)+this.getImageSize(e)+i.substring(l+o.length))})}),tn(this,"getImageSize",t=>t?`_${t}x.`:"_200x."),tn(this,"setDropdownOptionMapping",t=>{let e=this.getState("optionsWithValues");e&&e.forEach(e=>{let i=this.querySelector(`#p-variant-dropdown-${e.position}`);if(!i)return;let o=Array.from(i.options);o.forEach(e=>{var i,o;let l=e.getAttribute("data-gp-option-value-id");if(!l)return;let n=e.value,a=null==t?void 0:t[l];l&&n&&(this.optionIdsMapping={...this.optionIdsMapping,[l]:n}),a&&(e.setAttribute("data-gp-option-available",null!==(o=null==a?void 0:null===(i=a.available)||void 0===i?void 0:i.toString())&&void 0!==o?o:"true"),e.disabled=!(null==a?void 0:a.available))})})}),tn(this,"applySeparateActiveOption",async(t,e)=>{try{this.setStyleOptionValue(e,{shopifyProductOptionValues:t.shopifyProductOptionValues}),this.changeVariantLabel(e);let i=this.createVariantSelected(t,e);this.updateVariantContext(i)}catch(t){console.error("Error in applySeparateActiveOption:",t)}}),tn(this,"createVariantSelected",(t,e)=>({...t.currentShopifyVariant,shopifyProductOptionValues:null==t?void 0:t.shopifyProductOptionValues,options:Object.entries(e).map(([t,e])=>({name:t,value:e}))})),tn(this,"activeFeatureExtendVariant",async()=>{var t;let e=this.getSetting(),i=this.getContext("preSelectedOptionIds");if(!(null==e?void 0:e.hasPreSelected)||!(null==i?void 0:i.length)){this.setDropdownOptionMapping();return}try{if(!(null==i?void 0:i.length))return;let e=await this.fetchShopifyVariantWithOptionId(i);if(!e){console.warn("Shopify variant state not found for option IDs:",i);return}this.setDropdownOptionMapping(null==e?void 0:e.shopifyProductOptionValues);let o=this.getSelectedOptionByVariant(e.currentShopifyVariant);if(!(null==e?void 0:null===(t=e.currentShopifyVariant)||void 0===t?void 0:t.available)){let t=this.getState("firstAvailableVariant");o=this.getSelectedOptionByVariant(t),this.changeVariantLabel(o),this.updateVariantContext({...t,options:Object.entries(o).map(([t,e])=>({name:t,value:e}))});return}this.interactionListenerLoaded(o),this.applySeparateActiveOption(e,o)}catch(t){console.error("Error in activeFeatureExtendVariant:",t)}}),tn(this,"formatPrice",()=>{let t=this.getSetting(),e=this.getState("moneyFormat"),i=this.querySelector("#p-variant-group-dropdown"),o=null==i?void 0:i.querySelectorAll("option");(null==t?void 0:t.price)&&(null==o?void 0:o.length)&&o.forEach(t=>{let i=t.text.split(" - "),o=t.getAttribute("origin-price");if(o&&e){i.pop();let l=window.Shopify.formatMoney(`${o}`,e);i.push(l),t.innerHTML=i.join(" - ")}})}),tn(this,"changeVariantLabel",t=>{let e=this.getSetting(),i={},o=Array.from(this.getElementsByClassName("variant-inside"));o.forEach(o=>{let l=o.querySelector("select"),n=o.getElementsByClassName("variant-display")[0];if(!n)return;let a=o.getAttribute("option-name");if(!a)return;let r=null==t?void 0:t[null!=a?a:""];if("blank"===r){i[a]="blank",n.innerHTML=`${a}`;return}(null==e?void 0:e.hasPreSelected)||this.isChangeVariant?l||(i[a]=r,n.innerHTML=`${a}: <span>${null!=r?r:""}</span>`):(n.textContent=null!=a?a:"",i[a]="blank")}),this.setContext("currentSelectedOption",i)}),tn(this,"getVariantConfiguration",t=>{let e=this.getSetting(),i=null==e?void 0:e.variantPresets,o=null==i?void 0:i.find(e=>e.optionName===t);return o||(null==i?void 0:i.find(t=>"base"===t.optionName))}),tn(this,"getStylesPreset",t=>{var e;let i=this.getVariantConfiguration(null==t?void 0:t.optionName),o=null===(e=i.presets)||void 0===e?void 0:e[null==t?void 0:t.optionType];return o}),tn(this,"composePaddingPreset",(t,e)=>{var i,o,l,n,a,r,s,d,u;if("color"===e)return"";let p="16px",v={"--pl":"0px","--pr":"0px","--pl-tablet":"0px","--pr-tablet":"0px","--pl-mobile":"0px","--pr-mobile":"0px","--pt":"0px","--pb":"0px"},h={...t}.width;return(null===(i=String(null==t?void 0:null===(o=t.width)||void 0===o?void 0:o.desktop))||void 0===i?void 0:i.toLowerCase())!=="auto"&&(null==h?void 0:h.desktop)||(v["--pl"]=p,v["--pr"]=p),(null===(l=String(null==t?void 0:null===(n=t.width)||void 0===n?void 0:n.tablet))||void 0===l?void 0:l.toLowerCase())!=="auto"&&(null==t?void 0:null===(a=t.width)||void 0===a?void 0:a.tablet)||(v["--pl-tablet"]=p,v["--pr-tablet"]=p),(null===(r=String(null==t?void 0:null===(s=t.width)||void 0===s?void 0:s.mobile))||void 0===r?void 0:r.toLowerCase())!=="auto"&&(null==t?void 0:null===(d=t.width)||void 0===d?void 0:d.mobile)||(v["--pl-mobile"]=p,v["--pr-mobile"]=p),(null===(u=String(null==t?void 0:t.height))||void 0===u?void 0:u.toLowerCase())!=="auto"&&(null==t?void 0:t.height)||(v["--pt"]="8px",v["--pb"]="8px"),this.getStyleOfObject({...v})}),tn(this,"composeWidthHeightPreset",t=>{var e,i,o;let l={"--w":null==t?void 0:null===(e=t.width)||void 0===e?void 0:e.desktop,"--w-tablet":null==t?void 0:null===(i=t.width)||void 0===i?void 0:i.tablet,"--w-mobile":null==t?void 0:null===(o=t.width)||void 0===o?void 0:o.mobile,"--h":null==t?void 0:t.height};return this.getStyleOfObject(l)}),tn(this,"composeBorderNoSetupColor",()=>{let t=this.getState("styles");return this.getStyleOfObject({"--d":"flex","--jc":"center","	--ai":"center","--w":"100%","--h":"100%","--of":"hidden","--bs":"dashed",...x(null==t?void 0:t.optionBorder),...F(null==t?void 0:t.optionBorder)})}),tn(this,"defaultStyleCssColorType",()=>this.getStyleOfObject({"--radius":"9999px","--bc":"transparent","--bg":"transparent","--p":"4px"})),tn(this,"defaultStyleCssImageType",()=>{let t=this.getState("styles");return this.getStyleOfObject({"--bs":"dashed",...x(null==t?void 0:t.optionBorder),...F(null==t?void 0:t.optionBorder)})}),tn(this,"composeBorderSetupColor",()=>{let t=this.getState("styles");return this.getStyleOfObject({...$(null==t?void 0:t.optionBorder),...x(null==t?void 0:t.optionBorder),...F(null==t?void 0:t.optionBorder)})}),tn(this,"renderVariantPreset",()=>{let t=Array.from(this.getElementsByClassName("variant-option-group"));this.walkVariants(t);let e=Array.from(this.getElementsByClassName("dropdown-option-item"));e.length>0&&e.forEach(t=>{"false"===t.getAttribute("option-renderer")&&t.classList.remove("gp-hidden")})}),tn(this,"applyStyleForEachVariant",(t,e,i)=>{var o,l,n;let{config:a,styleSettings:r,optionNamePretty:s}=i,d=e.getAttribute("option-type"),u=this.composePaddingPreset(r,d);this.setStyles(null===(o=e.getElementsByClassName("option-value"))||void 0===o?void 0:o[0],u);let p=(null==a?void 0:a.optionType)==="color",v=(null==a?void 0:a.optionType)==="image"||"shopify_image";if(d!==(null==a?void 0:a.optionType))return;let h=Array.from(t.getElementsByClassName("dropdown-option-item"));if(h.forEach(t=>{t.getAttribute("option-data")===s&&t.getAttribute("option-type")===(null==a?void 0:a.optionType)&&t.remove()}),p){let t=null===(l=e.getElementsByClassName("option-value"))||void 0===l?void 0:l[0],i=null===(n=e.getElementsByClassName("gp-color-circle"))||void 0===n?void 0:n[0];i&&(this.setStyles(i,"width: 100%; height: 100%"),this.setStyles(i,this.composeBorderSetupColor())),t&&(this.setStyles(t,this.composeBorderNoSetupColor()),this.removeStyles(t,["width","height","border","border-radius"]))}if(v){let t=e.querySelector("img");if(this.setStyles(t,"width: 100%; height: 100%"),!t){let t=e.querySelector(".option-value");this.removeStyles(t,["width","height"]),this.setStyles(e,this.defaultStyleCssImageType())}}e.setAttribute("data-hidden","false"),e.classList.remove("gp-hidden")}),tn(this,"walkVariantChildrens",t=>{var e,i;let{$variant:o,$variantBaseItem:l}=null!==(e=t.nodes)&&void 0!==e?e:{},{shouldDropdown:n,styleSettings:a,config:r,optionName:s}=null!==(i=t.props)&&void 0!==i?i:{},d=z(s);l.forEach(t=>{this.removeDropdown(t,n),this.overrideStyleVariantItem(t,a);let e=null==t?void 0:t.querySelectorAll("[option-data='"+d+"']");e.forEach(t=>{this.applyStyleForEachVariant(o,t,{config:r,styleSettings:a,optionNamePretty:d})})})}),tn(this,"overrideStyleVariantItem",(t,e)=>{let i=this.composeWidthHeightPreset(e);this.setStyles(t,i)}),tn(this,"removeDropdown",(t,e)=>{e&&t.remove()}),tn(this,"getStyleForDropdown",t=>{var e,i,o,l,n,a,r;let s=this.getState("styles"),{optionTypography:u,optionTypo:p,swatchHeight:h}=s,c=V("w",C(null==t?void 0:t.width)),g={...S({bg:d(null==t?void 0:null===(e=t.optionBgColor)||void 0===e?void 0:e.active),bs:null==t?void 0:null===(o=t.optionBorder)||void 0===o?void 0:null===(i=o.active)||void 0===i?void 0:i.border,bw:null==t?void 0:null===(n=t.optionBorder)||void 0===n?void 0:null===(l=n.active)||void 0===l?void 0:l.width,bc:d(null==t?void 0:null===(r=t.optionBorder)||void 0===r?void 0:null===(a=r.active)||void 0===a?void 0:a.color)}),..._("c",null==t?void 0:t.optionTextColor),..._("bg",null==t?void 0:t.optionBgColor),...P(p,u),...V("h",h),...c,...$(null==t?void 0:t.optionBorder),...x(null==t?void 0:t.optionBorder),...F(null==t?void 0:t.optionBorder),...b(null==t?void 0:t.optionShadow,"box-shadow",null==t?void 0:t.optionHasShadow),...v(null==t?void 0:t.optionRounded),appearance:"none","background-image":"url(https://cdn.shopify.com/s/files/1/1827/4239/t/1/assets/ico-select.svg?v=155563818344741998551488860031)","background-repeat":"no-repeat","background-position":"right 16px center"};return g}),tn(this,"walkVariants",t=>{t.forEach(t=>{let e=t.getAttribute("variant-option-name"),i=this.getVariantConfiguration(e),o=(null==i?void 0:i.optionType)==="dropdown",l=Array.from(t.getElementsByClassName("option-item")),n=Array.from(t.getElementsByClassName("dropdown-option-item")),a=null==i?void 0:i.presets[i.optionType],r=this.getStyleForDropdown(a),s=this.getStyleOfObject(r);n.forEach(t=>{t.setAttribute("style",s)}),this.walkVariantChildren({nodes:{$variant:t,$variantBaseItem:l,$variantDropdownItem:n},props:{config:i,optionName:e,shouldDropdown:o,styleSettings:a}}),this.walkVariantChildrens({nodes:{$variant:t,$variantBaseItem:l},props:{config:i,optionName:e,shouldDropdown:o,styleSettings:a}})})}),tn(this,"walkVariantChildren",t=>{var e,i;let{$variant:o,$variantDropdownItem:l}=null!==(e=t.nodes)&&void 0!==e?e:{},{config:n,optionName:a,styleSettings:r,shouldDropdown:s}=null!==(i=t.props)&&void 0!==i?i:{};this.onOffPresetGroup(null==n?void 0:n.hide,a),this.overrideDropdownStyle(o,{shouldDropdown:s,$variantDropdownItem:l,styleSettings:r,optionName:a})}),tn(this,"onOffPresetGroup",(t,e)=>{if(!e||!t)return;let i=Array.from(this.getElementsByClassName("variant-inside"));return i.forEach(t=>{var i;z(null!==(i=t.getAttribute("option-name"))&&void 0!==i?i:"")===`${z(e)}`&&(null==t||t.remove())}),!1}),tn(this,"overrideDropdownStyle",(t,e)=>{let{shouldDropdown:i,$variantDropdownItem:o,styleSettings:l,optionName:n}=e;i||(t.style.cssText+=`--cg: ${null==l?void 0:l.spacing}`,o.forEach(t=>t.remove()));let a=this.getStylesPreset({optionName:n,optionType:"dropdown"});if(i){let t=0;o.forEach(e=>{t++;let i=`--h: ${null==a?void 0:a.height}`,l=this.getStyleOfObject(V("w",C(null==a?void 0:a.width))),n=this.getStyleOfObject(V("minw",C(null==a?void 0:a.width)));e.style.cssText+=`${l}${n}${i}`,o.length>t?e.remove():e.classList.remove("gp-hidden")})}}),tn(this,"getCustomCSSActiveState",(t,e,i)=>{var o,l,n,a,r,s,u;return S({bgc:t?"":d(null==i?void 0:null===(o=i.optionBgColor)||void 0===o?void 0:o.active),bs:null==i?void 0:null===(n=i.optionBorder)||void 0===n?void 0:null===(l=n.active)||void 0===l?void 0:l.border,bw:null==i?void 0:null===(r=i.optionBorder)||void 0===r?void 0:null===(a=r.active)||void 0===a?void 0:a.width,bc:d(null==i?void 0:null===(u=i.optionBorder)||void 0===u?void 0:null===(s=u.active)||void 0===s?void 0:s.color)})}),tn(this,"getSwatchAutoWidth",()=>{let t=this.getState("styles"),e={};return tl.forEach(i=>{var o;e[i]=(null==t?void 0:null===(o=t.swatchItemWidth)||void 0===o?void 0:o[i])==="auto"}),e}),tn(this,"getStylesForOption",(t,e,i)=>{var o,l,n;let a=this.getState("styles"),{optionTypography:r,optionTypo:s,swatchHeight:d,swatchWidth:u}=a,p=(null==i?void 0:i.optionType)==="color",h=(null==i?void 0:i.optionType)==="image"||(null==i?void 0:i.optionType)==="image_shopify",c=V("w",C(u,this.getSwatchAutoWidth())),y=this.getStylesPreset({optionName:null==i?void 0:i.optionName,optionType:null==i?void 0:i.optionType});return{...t||p?{}:_("bg",null==y?void 0:y.optionBgColor),...t?this.getCustomCSSActiveState(p,h,y):{},...P(s,r),...V("h",d),...c,...e,...t?g(null==y?void 0:y.optionRounded):p?v({normal:null==y?void 0:null===(o=y.optionRounded)||void 0===o?void 0:o.normal}):v(null==y?void 0:y.optionRounded),...t?f({value:null==y?void 0:null===(l=y.optionShadow)||void 0===l?void 0:l.active,state:"active",styleAppliedFor:"box-shadow",isEnableShadow:null==y?void 0:null===(n=y.optionHasShadow)||void 0===n?void 0:n.active},!0):b(null==y?void 0:y.optionShadow,"box-shadow",null==y?void 0:y.optionHasShadow),...t||p?{}:$(null==y?void 0:y.optionBorder),...t||p?{}:x(null==y?void 0:y.optionBorder),...t||p?{}:F(null==y?void 0:y.optionBorder)}}),tn(this,"getStylesForOptionItem",(t,e)=>{let{optionTextColor:i}=e;return t?S({c:d(null==i?void 0:i.active)}):_("c",i)}),tn(this,"getStyleOfObject",t=>{let e=Object.keys(t),i="";return e.forEach(e=>{t[e]&&(i+=`${e}: ${t[e]};`)}),i}),tn(this,"getClassesByString",t=>t.split(" ").filter(t=>!!t.trim())),tn(this,"handleRectangleOptionActive",(t,e,i)=>{var o,l;let n=this.getStylesPreset({optionName:null==i?void 0:i.optionName,optionType:null==i?void 0:i.optionType});if((null==i?void 0:i.optionType)!=="color"){let i=D(j("bg",null==n?void 0:null===(o=n.optionBgColor)||void 0===o?void 0:o.active),j("text",null==n?void 0:null===(l=n.optionTextColor)||void 0===l?void 0:l.active)),a=D(W("bg",null==n?void 0:n.optionBgColor),W("text",null==n?void 0:n.optionTextColor));e?(t.classList.add(...this.getClassesByString(i)),t.classList.remove(...this.getClassesByString(a))):(t.classList.remove(...this.getClassesByString(i)),t.classList.add(...this.getClassesByString(a)))}this.applySpecialStyleForOption(t,{optionName:null==i?void 0:i.optionName,optionType:null==i?void 0:i.optionType,isActive:e}),this.applyStyleForPresetItem(t,{optionType:null==i?void 0:i.optionType,optionName:null==i?void 0:i.optionName,isActive:e}),this.applySpacingForPresetItem(t,{optionName:null==i?void 0:i.optionName,optionType:null==i?void 0:i.optionType})}),tn(this,"applySpecialStyleForOption",(t,e)=>{let i=(null==e?void 0:e.optionType)==="color",o=(null==e?void 0:e.optionType)==="image"||(null==e?void 0:e.optionType)==="image_shopify",{isActive:l,styleSpecial:n}=null!=e?e:{},a=this.getStylesPreset({optionName:null==e?void 0:e.optionName,optionType:null==e?void 0:e.optionType});t.setAttribute("style",this.getStyleOfObject({...this.getStylesForOption(!!l,n||{},{optionType:null==e?void 0:e.optionType,optionName:null==e?void 0:e.optionName}),...!i&&!o&&this.getStylesForOptionItem(l,a)}))}),tn(this,"applySpacingForPresetItem",(t,e)=>{var i;let o=this.getVariantConfiguration(null==e?void 0:e.optionName),l=null==o?void 0:o.presets[o.optionType],n=this.composePaddingPreset(l,null==e?void 0:e.optionType);this.setStyles(t,this.getStyleOfObject({"--w":"100%","--h":null==l?void 0:l.height})),this.setStyles(null===(i=t.getElementsByClassName("option-value"))||void 0===i?void 0:i[0],n)}),tn(this,"applyStyleForPresetItem",(t,e)=>{var i,o,l,n,a,r,s,d,u,p,h,c,y,m,f,b,S,O,V;let C=this.getStylesPreset({optionName:null==e?void 0:e.optionName,optionType:null==e?void 0:e.optionType}),{isActive:E,optionType:$}=null!=e?e:{};if("color"===$){let e=null===(i=t.getElementsByClassName("option-value"))||void 0===i?void 0:i[0],V=null===(o=t.getElementsByClassName("gp-color-circle"))||void 0===o?void 0:o[0];if(E){let t={...g(null==C?void 0:C.optionRounded),...v({normal:null==C?void 0:null===(l=C.optionRounded)||void 0===l?void 0:l.active,hover:null==C?void 0:null===(n=C.optionRounded)||void 0===n?void 0:n.active}),"--bs":"none","--hvr-bs":"none"};this.setStyles(e,`${this.getStyleOfObject(t)}`),this.setStyles(V,`${this.getStyleOfObject(t)}`)}else{let t={...v({hover:null==C?void 0:null===(a=C.optionRounded)||void 0===a?void 0:a.hover,normal:null==C?void 0:null===(r=C.optionRounded)||void 0===r?void 0:r.normal}),...w("bw",{normal:null==C?void 0:null===(d=C.optionBorder)||void 0===d?void 0:null===(s=d.normal)||void 0===s?void 0:s.width,hover:null==C?void 0:null===(p=C.optionBorder)||void 0===p?void 0:null===(u=p.hover)||void 0===u?void 0:u.width}),...w("bc",{normal:null==C?void 0:null===(c=C.optionBorder)||void 0===c?void 0:null===(h=c.normal)||void 0===h?void 0:h.color,hover:null==C?void 0:null===(m=C.optionBorder)||void 0===m?void 0:null===(y=m.hover)||void 0===y?void 0:y.color}),...w("bs",{normal:null==C?void 0:null===(b=C.optionBorder)||void 0===b?void 0:null===(f=b.normal)||void 0===f?void 0:f.border,hover:null==C?void 0:null===(O=C.optionBorder)||void 0===O?void 0:null===(S=O.hover)||void 0===S?void 0:S.border})};this.setStyles(e,`${this.getStyleOfObject(t)}`),this.setStyles(V,`${this.getStyleOfObject(t)}`)}}if("image"===$||"image_shopify"===$){let e=null===(V=t.querySelector("img"))||void 0===V?void 0:V.getAttribute("src");if(e)return}}),tn(this,"getVariants",()=>{var t;let e=this.getState("variants"),i=this.getState("optionsWithValues"),o=this.getState("variantInventoryQuantity"),l=this.getState("variantInventoryPolicy");return null!==(t=null==e?void 0:e.map((t,e)=>{let{option1:n,option2:a,option3:r}=t||{},s=[],d=i.find(t=>1===t.position),u=i.find(t=>2===t.position),p=i.find(t=>3===t.position);return n&&d&&(s=s.concat({name:d.name,value:n})),a&&u&&(s=s.concat({name:u.name,value:a})),r&&p&&(s=s.concat({name:p.name,value:r})),{...t,options:s,inventoryQuantity:(null==o?void 0:o[e])||0,inventory_policy:(null==l?void 0:l[e])||"deny"}}))&&void 0!==t?t:[]}),tn(this,"useVariantOutStock",(t,e,i)=>{let o=this.getCurrentSelectedOption(),l=this.getVariants(),n=i.optionNumber;if(i.position<n)return l.some(i=>{if(i){let{options:o}=i,l=null==o?void 0:o.some(i=>(null==i?void 0:i.name)===t&&i.value===e),n=U(i);return l&&n}});let a=this.getSelectedVariant(l,{...o,[t]:e});return U(a)}),tn(this,"getFirstInStockVariant",t=>t.flat().find(t=>U(t))),tn(this,"getSelectedVariant",(t,e,i)=>{var o;if(t&&t.length&&e&&(null===(o=t[0])||void 0===o?void 0:o.options.length)===Object.keys(e).length){if(i){let e=t.find(t=>t.id===+i);if(e)return e}return t.find(t=>Object.entries(e).every(([e,i])=>null==t?void 0:t.options.some(t=>t.name===e&&t.value===i)))}}),tn(this,"getCurrentSelectedOption",()=>{let t=this.getState("variantSelected")||this.getContext("variantSelected"),e=this.getState("currentSelected"),i=this.getState("optionsWithValues");if(i){if(!e){let e=this.getSelectedOptionByVariant(t);return e}return e}}),tn(this,"getSelectedOptionByVariant",t=>{let e=this.getState("optionsWithValues"),{option1:i,option2:o,option3:l}=t||{},n=[i,o,l],a={};return e.forEach(t=>{a={...a,[t.name]:n[t.position-1]}}),a}),tn(this,"setEventForVariantDropdown",()=>{let t=this.getState("optionsWithValues");t&&t.forEach(t=>{let e=this.querySelector(`#p-variant-dropdown-${t.position}`);e&&e.addEventListener("change",i=>{let o=i.target;if(!o){console.warn("Dropdown target is missing or invalid.");return}let l=o.value,n=l.replaceAll('"','\\"'),a=e.querySelector(`[option-value="${n}"]`);this.handleChangeVariant({optionId:t.name,optionValue:l,$element:a||void 0})})})}),tn(this,"updateVariantContext",t=>{var e;this.setVariantParams(null==t?void 0:null===(e=t.id)||void 0===e?void 0:e.toString()),this.setContext("variantSelected",t),this.createEventChange(t)}),tn(this,"setEventForVariantGroupDropdown",()=>{let t=this.getSetting(),e=this.querySelector("#p-variant-group-dropdown");e&&e.addEventListener("change",async e=>{try{let i=this.getVariants(),o=e.target;if(!o){console.error("Dropdown element is missing.");return}let l=null==o?void 0:o.value,n=i.find(t=>t.id==l),a=U(n)||(null==t?void 0:t.soldOutStyle)==="line";a&&n&&this.updateVariantContext(n)}catch(t){console.error("Error in setEventForVariantGroupDropdown:",t)}})}),tn(this,"createEventChange",t=>{var e,i,o;let l=this.getContext(),n=new CustomEvent("gp:product-change-variant",{bubbles:!0,cancelable:!0,detail:{variantSelected:t,productId:null!==(o=null==l?void 0:l.productId)&&void 0!==o?o:"",productElementUid:null===(i=this.closest("gp-product"))||void 0===i?void 0:null===(e=i.dataset)||void 0===e?void 0:e.uid,fromIsSyncProduct:null==l?void 0:l.isSyncProduct},composed:!0});window.dispatchEvent(n)}),tn(this,"getSetting",()=>this.getState("setting")),tn(this,"interactionListenerLoaded",t=>{if(window.interactionLoaded){this.dispatchInteractionChangeOptions(t);return}window.addEventListener("gp:flow-actions-loaded",()=>{this.dispatchInteractionChangeOptions(t)})}),tn(this,"dispatchInteractionChangeOptions",t=>{if(!this.trigger)return;let e=this.getVariants(),i=this.getSelectedVariant(e,t),o=U(i);this.trigger({event:"gp:rollback:item-selected"}),this.trigger({event:"gp:item-selected",data:{selectedOptions:t,inStock:o}})}),tn(this,"handleChangeVariant",async({optionId:t,optionValue:e,$element:i})=>{var o;this.updateFirstChangeVariant(),this.isChangeVariant=!0;let l=this.getSetting(),n=null!==(o=null==i?void 0:i.getAttribute("option-position"))&&void 0!==o?o:"",a=`option${n}`,r=null==i?void 0:i.getAttribute("data-gp-option-available"),s=this.isApplyNewFeatureExtendVariant()?"false"===r:!this.getVariants().find(t=>t[a]===e&&t.available),d=(null==i?void 0:i.disabled)||(null==i?void 0:i.classList.contains("!gp-cursor-not-allowed")),u=!s||"line"===this.soldOutStyle||s&&!d,p=this.getCurrentSelectedOption(),v={...p,[t]:e};if(u){this.setState("currentSelected",v),l.variantGroup||this.setStyleOptionValue(v);let t=this.getSelectedVariant(this.getVariants(),v),e=this.getOptionValueIdSelected(v);if(e.length&&this.isApplyNewFeatureExtendVariant()){let i=await this.fetchShopifyVariantWithOptionId(e);i&&(t=this.createVariantSelected(i,v),this.setStyleOptionValue(v,{shopifyProductOptionValues:null==i?void 0:i.shopifyProductOptionValues}),this.setDropdownOptionMapping(null==i?void 0:i.shopifyProductOptionValues))}this.changeVariantLabel(v),this.updateVariantContext(t)}}),tn(this,"parseStringToDOM",t=>{let e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}),tn(this,"fetchShopifyVariantWithOptionId",async t=>{try{let i=new URL(window.location.href),o=this.getState("productHandle");if(!o)return null;let l=new URLSearchParams({section_id:"gp-variant-selected",option_values:t.join()}),n=await fetch(`${i.origin}/products/${o}?${l}`);if(!n.ok)return console.error("Failed to fetch variant",n.status,n.statusText),null;let a=this.parseStringToDOM(await n.text());try{var e;let t=JSON.parse(null!==(e=null==a?void 0:a.textContent)&&void 0!==e?e:"{}");return t}catch(t){return console.error("Failed to parse variant state",t),null}}catch(t){return console.error("fetchVariantWithOptionId error:",t),null}}),tn(this,"getOptionValueIdSelected",t=>Object.values(t).map(t=>Object.keys(this.optionIdsMapping).find(e=>this.optionIdsMapping[e]===t))),tn(this,"hasOptionValueIdsMapping",t=>Object.values(t).every(t=>Object.keys(this.optionIdsMapping).find(e=>this.optionIdsMapping[e]===t))),tn(this,"setVariantParams",t=>{let e=new URL(window.location.href),i=this.getState("productUrl"),o=this.checkValidUrlToSetParam(e,i);o&&(this.updateUrlVariantParam(e,t),history.replaceState(null,"",e.toString()))}),tn(this,"removeSoldOutStyle",t=>{var e,i;let o=null==t?void 0:null===(e=t.getElementsByClassName("line"))||void 0===e?void 0:e[0];o&&o.remove();let l=null==t?void 0:null===(i=t.getElementsByClassName("sold-out-mark-overlay"))||void 0===i?void 0:i[0];l&&l.remove()}),tn(this,"removeDisableStyle",t=>{var e;t.disabled=!1;let i=t.closest(".option-item-inner");i?null==i||i.classList.remove("gp-opacity-20"):null===(e=t.closest(".option-item"))||void 0===e||e.classList.remove("gp-opacity-20"),t.removeAttribute("data-disabled")}),tn(this,"addDisableStyle",t=>{var e;t.disabled=!0;let i=t.closest(".option-item-inner");i?null==i||i.classList.add("gp-opacity-20"):null===(e=t.closest(".option-item"))||void 0===e||e.classList.add("gp-opacity-20"),t.setAttribute("data-disabled","disabled")}),tn(this,"checkUseFuncHandleDisableOptionValue",(t,e)=>{var i,o,l,n,a;if(Object.keys(null!==(i=null==e?void 0:e.shopifyProductOptionValues)&&void 0!==i?i:{}).length){let i=null!==(n=null==t?void 0:null===(o=t.parentElement)||void 0===o?void 0:o.getAttribute("data-gp-option-value-id"))&&void 0!==n?n:"",r=null==e?void 0:null===(l=e.shopifyProductOptionValues)||void 0===l?void 0:l[i];r&&t.setAttribute("data-gp-option-available",null==r?void 0:null===(a=r.available)||void 0===a?void 0:a.toString())}this.soldOutStyle?this.applySoldOutStyles(t,e):this.applyOldSoldOutDisableStyle(t)}),tn(this,"checkDispatchInteraction",(t,e)=>{let i=this.getSetting();return JSON.stringify(t)!==JSON.stringify(e)||JSON.stringify(t)===JSON.stringify(e)&&!i.hasPreSelected&&this.isFirstChangeVariant}),tn(this,"updateFirstChangeVariant",()=>{this.isChangeVariant?this.isFirstChangeVariant&&(this.isFirstChangeVariant=!1):this.isFirstChangeVariant=!0}),tn(this,"applyOldSoldOutDisableStyle",t=>{var e,i,o,l;let n=this.getSetting(),a=null!==(e=t.getAttribute("option-value"))&&void 0!==e?e:"",r=null!==(i=t.getAttribute("option-position"))&&void 0!==i?i:"",s=`option${r}`,d=t.getAttribute("data-gp-option-available"),u=this.isApplyNewFeatureExtendVariant()?"false"===d:!this.getVariants().find(t=>t[s]===a&&t.available);(null==n?void 0:n.soldOutStyle)==="none"&&(u?(t.disabled=!0,null===(o=t.closest(".option-item"))||void 0===o||o.classList.add("gp-opacity-20"),t.setAttribute("data-disabled","disabled")):(null===(l=t.closest(".option-item"))||void 0===l||l.classList.remove("gp-opacity-20"),t.disabled=!1,t.removeAttribute("data-disabled")))}),tn(this,"isApplyNewFeatureExtendVariant",()=>{var t;let e=Number(null!==(t=this.getState("totalVariantCombinations"))&&void 0!==t?t:0);return e>100}),tn(this,"applySoldOutStyles",(t,e)=>{var i,o,l,n,a;this.clearStyles(t);let r=null==e?void 0:e.isSelected,s=this.getSetting(),d=this.getState("styles"),u=null!==(o=t.getAttribute("option-value"))&&void 0!==o?o:"",p=null!==(l=t.getAttribute("option-data"))&&void 0!==l?l:"",v=null!==(n=t.getAttribute("option-type"))&&void 0!==n?n:"",h=Number(null!==(a=t.getAttribute("option-position"))&&void 0!==a?a:"0"),c=(null===(i=this.getElementsByClassName("variant-inside"))||void 0===i?void 0:i.length)||0,g=t.getAttribute("data-gp-option-available"),y=this.isApplyNewFeatureExtendVariant()?"false"===g:!this.useVariantOutStock(p,u,{position:h,optionNumber:c});switch(null==s?void 0:s.soldOutStyle){case"disable":this.handleDisableStyle(t,y);break;case"line":this.handleLineStyle(t,{optionType:v,styles:d,isSelected:r,isOutOfStock:y})}}),tn(this,"clearStyles",t=>{this.removeSoldOutStyle(t),this.removeDisableStyle(t)}),tn(this,"handleDisableStyle",(t,e)=>{e?this.addDisableStyle(t):this.removeDisableStyle(t)}),tn(this,"handleLineStyle",(t,e)=>{let{optionType:i,styles:o,isSelected:l,isOutOfStock:n}=null!=e?e:{};if(n&&["image","image_shopify","color","rectangle_list"].includes(i)){if("color"===i)this.applySoldOutColorStyle(t);else{var a;let e=document.createElement("div");e.classList.add("line"),e.style.cssText="position: absolute; border-top: 1px solid; transform: rotate(-45deg); width: 200px; display: block; top: 50%; max-width: none !important","rectangle_list"===i&&this.applyRectangleListActiveStyle(e,l,o),("image"===i||"image_shopify"===i)&&this.applyImageActiveStyle(e,t);let n=null===(a=t.getElementsByClassName("line"))||void 0===a?void 0:a[0];n&&n.remove(),t.appendChild(e)}}}),tn(this,"applyImageActiveStyle",(e,i)=>{e.style.cssText+=`border-color: ${t} !important;`,this.addSoldOutMarkOverlay(i)}),tn(this,"applyRectangleListActiveStyle",(e,i,o)=>{var l,n,a,r;e.style.cssText+=`border-color: ${i?this.getLineBorderColor(null!==(a=null==o?void 0:null===(l=o.optionBgColor)||void 0===l?void 0:l.active)&&void 0!==a?a:t):this.getLineBorderColor(null!==(r=null==o?void 0:null===(n=o.optionBgColor)||void 0===n?void 0:n.normal)&&void 0!==r?r:t)} !important;`}),tn(this,"applySoldOutColorStyle",o=>{var l,n,a,r,s;let d=null===(l=o.getElementsByClassName("gp-color-circle"))||void 0===l?void 0:l[0],u=document.createElement("div");u.classList.add("line"),u.style.cssText="position: absolute; border-top: 1px solid; transform: rotate(-45deg); display: block; top: 50%;";let p=null==d?void 0:null===(n=d.getElementsByClassName("line"))||void 0===n?void 0:n[0];if(p&&p.remove(),d){let o=d.getAttribute("data-test"),l=null==o?void 0:o.includes("background-color");if(l)u.style.cssText+=`width: ${d.clientWidth}px; border-color: ${this.getLineBorderColor(e(null===(a=window)||void 0===a?void 0:a.getComputedStyle(d).backgroundColor))} !important;`,d.appendChild(u);else{let l=null==o?void 0:o.match(/#(([\da-fA-F]{2}){3,4}|([\da-fA-F]){3,4})/g),n=i(null==l?void 0:l[0]);u.style.cssText+=`width: ${d.clientWidth}px; border-color: ${this.getLineBorderColor(e(null!=n?n:t))} !important;`,d.appendChild(u)}}else{let t=null===(r=o.getElementsByClassName("option-value"))||void 0===r?void 0:r[0];u.style.cssText+=`width: ${null!==(s=null==t?void 0:t.clientWidth)&&void 0!==s?s:45}px;`,null==t||t.appendChild(u)}}),tn(this,"addSoldOutMarkOverlay",t=>{var e;let i=document.createElement("div");i.classList.add("sold-out-mark-overlay"),i.style.cssText="position: absolute; width: 100%; height: 100%; background-color: #ffffff; opacity: 0; top: 0; left: 0; display: block";let o=null===(e=t.getElementsByClassName("sold-out-mark-overlay"))||void 0===e?void 0:e[0];o&&o.remove(),t.appendChild(i)}),tn(this,"setStyleOptionValue",(t,e)=>{let i=null==e?void 0:e.loaded,o=this.getSetting(),l=Array.from(this.getElementsByClassName("option-value-wrapper"));l.forEach(l=>{var n,a,r;if(!l)return;let s=null!==(n=l.getAttribute("option-data"))&&void 0!==n?n:"",d=null!==(a=l.getAttribute("option-value"))&&void 0!==a?a:"",u=null!==(r=l.getAttribute("option-type"))&&void 0!==r?r:"",p=t[s]&&t[s]===d;i&&(p=(null!=o&&!!o.hasPreSelected||!!this.isChangeVariant)&&t[s]&&t[s]===d);let v=l.closest(".option-item");p?null==v||v.classList.add("option-item-active"):null==v||v.classList.remove("option-item-active"),["rectangle_list","image_shopify","image","color"].includes(u)&&this.handleRectangleOptionActive(l,!!p,{optionName:s,optionType:u}),this.checkUseFuncHandleDisableOptionValue(l,{isSelected:!!p,shopifyProductOptionValues:null==e?void 0:e.shopifyProductOptionValues})})}),tn(this,"setEventForOptionValue",()=>{let t=Array.from(this.getElementsByClassName("option-value-wrapper"));t.forEach(t=>{if(t){var e,i,o,l;let n=null!==(i=t.getAttribute("option-data"))&&void 0!==i?i:"",a=null!==(o=t.getAttribute("option-value"))&&void 0!==o?o:"",r=null!==(l=null==t?void 0:null===(e=t.closest(".option-item-inner"))||void 0===e?void 0:e.getAttribute("data-gp-option-value-id"))&&void 0!==l?l:"";a&&r&&(this.optionIdsMapping={...this.optionIdsMapping,[r]:a}),t.addEventListener("click",()=>this.handleChangeVariant({optionId:n,optionValue:a,$element:t}))}})})}};let ts=()=>{window.removeEventListener("gp-global-loaded",ts),customElements.get("gp-product-variants")||customElements.define("gp-product-variants",tr())};"completed"===window.gpReadyState?ts():window.addEventListener("gp-global-loaded",ts)}();
